<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 10 Chord Diagrams for Visualising Bilateral Migration | Tools for Estimating, Measuring and Working with Migration Data in R</title>
  <meta name="description" content="Chapter 10 Chord Diagrams for Visualising Bilateral Migration | Tools for Estimating, Measuring and Working with Migration Data in R" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 10 Chord Diagrams for Visualising Bilateral Migration | Tools for Estimating, Measuring and Working with Migration Data in R" />
  <meta property="og:type" content="book" />
  
  
  
  <meta name="github-repo" content="guyabel/migest-book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 10 Chord Diagrams for Visualising Bilateral Migration | Tools for Estimating, Measuring and Working with Migration Data in R" />
  
  
  

<meta name="author" content="Guy J. Abel, James Raymer, Ellen Kraly" />


<meta name="date" content="2021-10-18" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="estimating-bilateral-migration.html"/>
<link rel="next" href="sankey-plots-for-visualising-bilateral-migration.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> .</a></li>
<li class="chapter" data-level="2" data-path="outline.html"><a href="outline.html"><i class="fa fa-check"></i><b>2</b> Outline</a>
<ul>
<li class="chapter" data-level="2.1" data-path="outline.html"><a href="outline.html#workshop-on-migration-estimation"><i class="fa fa-check"></i><b>2.1</b> Workshop on Migration Estimation</a></li>
<li class="chapter" data-level="2.2" data-path="outline.html"><a href="outline.html#general-points"><i class="fa fa-check"></i><b>2.2</b> General Points</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="migration-concepts.html"><a href="migration-concepts.html"><i class="fa fa-check"></i><b>3</b> Migration Concepts</a>
<ul>
<li class="chapter" data-level="3.1" data-path="migration-concepts.html"><a href="migration-concepts.html#spatial"><i class="fa fa-check"></i><b>3.1</b> Spatial</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="migration-concepts.html"><a href="migration-concepts.html#place-of-residence"><i class="fa fa-check"></i><b>3.1.1</b> Place of Residence</a></li>
<li class="chapter" data-level="3.1.2" data-path="migration-concepts.html"><a href="migration-concepts.html#place-of-residence-1"><i class="fa fa-check"></i><b>3.1.2</b> Place of Residence</a></li>
<li class="chapter" data-level="3.1.3" data-path="migration-concepts.html"><a href="migration-concepts.html#place-of-residence-2"><i class="fa fa-check"></i><b>3.1.3</b> Place of Residence</a></li>
<li class="chapter" data-level="3.1.4" data-path="migration-concepts.html"><a href="migration-concepts.html#courgeau-1979"><i class="fa fa-check"></i><b>3.1.4</b> Courgeau (1979)</a></li>
<li class="chapter" data-level="3.1.5" data-path="migration-concepts.html"><a href="migration-concepts.html#place-of-origin"><i class="fa fa-check"></i><b>3.1.5</b> Place of Origin</a></li>
<li class="chapter" data-level="3.1.6" data-path="migration-concepts.html"><a href="migration-concepts.html#migrant-transition-data"><i class="fa fa-check"></i><b>3.1.6</b> Migrant Transition Data</a></li>
<li class="chapter" data-level="3.1.7" data-path="migration-concepts.html"><a href="migration-concepts.html#migrant-transition-data---rees-1970"><i class="fa fa-check"></i><b>3.1.7</b> Migrant Transition Data - Rees 1970</a></li>
<li class="chapter" data-level="3.1.8" data-path="migration-concepts.html"><a href="migration-concepts.html#migrants-and-migration"><i class="fa fa-check"></i><b>3.1.8</b> Migrants and Migration</a></li>
<li class="chapter" data-level="3.1.9" data-path="migration-concepts.html"><a href="migration-concepts.html#migration-event-data"><i class="fa fa-check"></i><b>3.1.9</b> Migration Event Data</a></li>
<li class="chapter" data-level="3.1.10" data-path="migration-concepts.html"><a href="migration-concepts.html#migration-event-data-1"><i class="fa fa-check"></i><b>3.1.10</b> Migration Event Data</a></li>
<li class="chapter" data-level="3.1.11" data-path="migration-concepts.html"><a href="migration-concepts.html#migration-event-data---courgeau-1979"><i class="fa fa-check"></i><b>3.1.11</b> Migration Event Data - Courgeau (1979)</a></li>
<li class="chapter" data-level="3.1.12" data-path="migration-concepts.html"><a href="migration-concepts.html#migration-event-data-2"><i class="fa fa-check"></i><b>3.1.12</b> Migration Event Data</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="migration-concepts.html"><a href="migration-concepts.html#temporal"><i class="fa fa-check"></i><b>3.2</b> Temporal</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="migration-concepts.html"><a href="migration-concepts.html#migration-interval"><i class="fa fa-check"></i><b>3.2.1</b> Migration Interval</a></li>
<li class="chapter" data-level="3.2.2" data-path="migration-concepts.html"><a href="migration-concepts.html#migration-interval---rees-1977"><i class="fa fa-check"></i><b>3.2.2</b> Migration Interval - Rees (1977)</a></li>
<li class="chapter" data-level="3.2.3" data-path="migration-concepts.html"><a href="migration-concepts.html#one-year-five-year-problem"><i class="fa fa-check"></i><b>3.2.3</b> One-Year Five-Year Problem</a></li>
<li class="chapter" data-level="3.2.4" data-path="migration-concepts.html"><a href="migration-concepts.html#one-year-five-year-problem---rees-1970"><i class="fa fa-check"></i><b>3.2.4</b> One-Year Five-Year Problem - Rees 1970</a></li>
<li class="chapter" data-level="3.2.5" data-path="migration-concepts.html"><a href="migration-concepts.html#one-year-five-year-problem---rees-1970-1"><i class="fa fa-check"></i><b>3.2.5</b> One-Year Five-Year Problem - Rees 1970</a></li>
<li class="chapter" data-level="3.2.6" data-path="migration-concepts.html"><a href="migration-concepts.html#one-year-five-year-problem---rees-1970-2"><i class="fa fa-check"></i><b>3.2.6</b> One-Year Five-Year Problem - Rees 1970</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="migration-concepts.html"><a href="migration-concepts.html#measures"><i class="fa fa-check"></i><b>3.3</b> Measures</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="migration-concepts.html"><a href="migration-concepts.html#migration-measures"><i class="fa fa-check"></i><b>3.3.1</b> Migration measures</a></li>
<li class="chapter" data-level="3.3.2" data-path="migration-concepts.html"><a href="migration-concepts.html#region-to-region-measures"><i class="fa fa-check"></i><b>3.3.2</b> Region to region measures</a></li>
<li class="chapter" data-level="3.3.3" data-path="migration-concepts.html"><a href="migration-concepts.html#region-to-region-measures-1"><i class="fa fa-check"></i><b>3.3.3</b> Region to region measures</a></li>
<li class="chapter" data-level="3.3.4" data-path="migration-concepts.html"><a href="migration-concepts.html#region-totals"><i class="fa fa-check"></i><b>3.3.4</b> Region totals</a></li>
<li class="chapter" data-level="3.3.5" data-path="migration-concepts.html"><a href="migration-concepts.html#region-totals-1"><i class="fa fa-check"></i><b>3.3.5</b> Region totals</a></li>
<li class="chapter" data-level="3.3.6" data-path="migration-concepts.html"><a href="migration-concepts.html#region-totals-2"><i class="fa fa-check"></i><b>3.3.6</b> Region totals</a></li>
<li class="chapter" data-level="3.3.7" data-path="migration-concepts.html"><a href="migration-concepts.html#rate-measures"><i class="fa fa-check"></i><b>3.3.7</b> Rate measures</a></li>
<li class="chapter" data-level="3.3.8" data-path="migration-concepts.html"><a href="migration-concepts.html#rates"><i class="fa fa-check"></i><b>3.3.8</b> Rates</a></li>
<li class="chapter" data-level="3.3.9" data-path="migration-concepts.html"><a href="migration-concepts.html#rates-1"><i class="fa fa-check"></i><b>3.3.9</b> Rates</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="handling-migration-data-in-r.html"><a href="handling-migration-data-in-r.html"><i class="fa fa-check"></i><b>4</b> Handling Migration Data in R</a>
<ul>
<li class="chapter" data-level="4.1" data-path="handling-migration-data-in-r.html"><a href="handling-migration-data-in-r.html#contingency-table"><i class="fa fa-check"></i><b>4.1</b> Contingency Table</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="handling-migration-data-in-r.html"><a href="handling-migration-data-in-r.html#contingency-table-1"><i class="fa fa-check"></i><b>4.1.1</b> Contingency Table</a></li>
<li class="chapter" data-level="4.1.2" data-path="handling-migration-data-in-r.html"><a href="handling-migration-data-in-r.html#contingency-table-2"><i class="fa fa-check"></i><b>4.1.2</b> Contingency Table</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="handling-migration-data-in-r.html"><a href="handling-migration-data-in-r.html#data-manipulation"><i class="fa fa-check"></i><b>4.2</b> Data Manipulation</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="handling-migration-data-in-r.html"><a href="handling-migration-data-in-r.html#r-matrix-and-array"><i class="fa fa-check"></i><b>4.2.1</b> R <code>matrix</code> and <code>array</code></a></li>
<li class="chapter" data-level="4.2.2" data-path="handling-migration-data-in-r.html"><a href="handling-migration-data-in-r.html#r-matrix-and-array-1"><i class="fa fa-check"></i><b>4.2.2</b> R <code>matrix</code> and <code>array</code></a></li>
<li class="chapter" data-level="4.2.3" data-path="handling-migration-data-in-r.html"><a href="handling-migration-data-in-r.html#show-totals"><i class="fa fa-check"></i><b>4.2.3</b> Show totals</a></li>
<li class="chapter" data-level="4.2.4" data-path="handling-migration-data-in-r.html"><a href="handling-migration-data-in-r.html#convert-to-matrix"><i class="fa fa-check"></i><b>4.2.4</b> Convert to matrix</a></li>
<li class="chapter" data-level="4.2.5" data-path="handling-migration-data-in-r.html"><a href="handling-migration-data-in-r.html#convert-to-matrix-1"><i class="fa fa-check"></i><b>4.2.5</b> Convert to matrix</a></li>
<li class="chapter" data-level="4.2.6" data-path="handling-migration-data-in-r.html"><a href="handling-migration-data-in-r.html#convert-to-matrix-2"><i class="fa fa-check"></i><b>4.2.6</b> Convert to matrix</a></li>
<li class="chapter" data-level="4.2.7" data-path="handling-migration-data-in-r.html"><a href="handling-migration-data-in-r.html#convert-to-data-frame"><i class="fa fa-check"></i><b>4.2.7</b> Convert to data frame</a></li>
<li class="chapter" data-level="4.2.8" data-path="handling-migration-data-in-r.html"><a href="handling-migration-data-in-r.html#convert-to-data-frame-1"><i class="fa fa-check"></i><b>4.2.8</b> Convert to data frame</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="handling-migration-data-in-r.html"><a href="handling-migration-data-in-r.html#matrix-operations"><i class="fa fa-check"></i><b>4.3</b> Matrix Operations</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="handling-migration-data-in-r.html"><a href="handling-migration-data-in-r.html#displaying-migration-matrics"><i class="fa fa-check"></i><b>4.3.1</b> Displaying migration matrics</a></li>
<li class="chapter" data-level="4.3.2" data-path="handling-migration-data-in-r.html"><a href="handling-migration-data-in-r.html#displaying-migration-matrics-1"><i class="fa fa-check"></i><b>4.3.2</b> Displaying migration matrics</a></li>
<li class="chapter" data-level="4.3.3" data-path="handling-migration-data-in-r.html"><a href="handling-migration-data-in-r.html#abbriviate-names"><i class="fa fa-check"></i><b>4.3.3</b> Abbriviate names</a></li>
<li class="chapter" data-level="4.3.4" data-path="handling-migration-data-in-r.html"><a href="handling-migration-data-in-r.html#abbriviate-names-1"><i class="fa fa-check"></i><b>4.3.4</b> Abbriviate names</a></li>
<li class="chapter" data-level="4.3.5" data-path="handling-migration-data-in-r.html"><a href="handling-migration-data-in-r.html#abbriviate-names-2"><i class="fa fa-check"></i><b>4.3.5</b> Abbriviate names</a></li>
<li class="chapter" data-level="4.3.6" data-path="handling-migration-data-in-r.html"><a href="handling-migration-data-in-r.html#data-scaling"><i class="fa fa-check"></i><b>4.3.6</b> Data scaling</a></li>
<li class="chapter" data-level="4.3.7" data-path="handling-migration-data-in-r.html"><a href="handling-migration-data-in-r.html#diagonal-elements"><i class="fa fa-check"></i><b>4.3.7</b> Diagonal elements</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="handling-migration-data-in-r.html"><a href="handling-migration-data-in-r.html#summaries"><i class="fa fa-check"></i><b>4.4</b> Summaries</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="handling-migration-data-in-r.html"><a href="handling-migration-data-in-r.html#net-flows-and-counterflows"><i class="fa fa-check"></i><b>4.4.1</b> Net flows and counterflows</a></li>
<li class="chapter" data-level="4.4.2" data-path="handling-migration-data-in-r.html"><a href="handling-migration-data-in-r.html#net-flows-and-counterflows-1"><i class="fa fa-check"></i><b>4.4.2</b> Net flows and counterflows</a></li>
<li class="chapter" data-level="4.4.3" data-path="handling-migration-data-in-r.html"><a href="handling-migration-data-in-r.html#totals"><i class="fa fa-check"></i><b>4.4.3</b> Totals</a></li>
<li class="chapter" data-level="4.4.4" data-path="handling-migration-data-in-r.html"><a href="handling-migration-data-in-r.html#totals-1"><i class="fa fa-check"></i><b>4.4.4</b> Totals</a></li>
<li class="chapter" data-level="4.4.5" data-path="handling-migration-data-in-r.html"><a href="handling-migration-data-in-r.html#totals-2"><i class="fa fa-check"></i><b>4.4.5</b> Totals</a></li>
<li class="chapter" data-level="4.4.6" data-path="handling-migration-data-in-r.html"><a href="handling-migration-data-in-r.html#totals-3"><i class="fa fa-check"></i><b>4.4.6</b> Totals</a></li>
<li class="chapter" data-level="4.4.7" data-path="handling-migration-data-in-r.html"><a href="handling-migration-data-in-r.html#totals-4"><i class="fa fa-check"></i><b>4.4.7</b> Totals</a></li>
<li class="chapter" data-level="4.4.8" data-path="handling-migration-data-in-r.html"><a href="handling-migration-data-in-r.html#rest-of-categroies"><i class="fa fa-check"></i><b>4.4.8</b> Rest of categroies</a></li>
<li class="chapter" data-level="4.4.9" data-path="handling-migration-data-in-r.html"><a href="handling-migration-data-in-r.html#rest-of-categroies-1"><i class="fa fa-check"></i><b>4.4.9</b> Rest of categroies</a></li>
<li class="chapter" data-level="4.4.10" data-path="handling-migration-data-in-r.html"><a href="handling-migration-data-in-r.html#rest-of-categroies-2"><i class="fa fa-check"></i><b>4.4.10</b> Rest of categroies</a></li>
<li class="chapter" data-level="4.4.11" data-path="handling-migration-data-in-r.html"><a href="handling-migration-data-in-r.html#rest-of-categroies-3"><i class="fa fa-check"></i><b>4.4.11</b> Rest of categroies</a></li>
<li class="chapter" data-level="4.4.12" data-path="handling-migration-data-in-r.html"><a href="handling-migration-data-in-r.html#exercise-ex2.r"><i class="fa fa-check"></i><b>4.4.12</b> Exercise (ex2.R)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="summary-migration-indices.html"><a href="summary-migration-indices.html"><i class="fa fa-check"></i><b>5</b> Summary Migration Indices</a>
<ul>
<li class="chapter" data-level="5.1" data-path="summary-migration-indices.html"><a href="summary-migration-indices.html#background"><i class="fa fa-check"></i><b>5.1</b> Background</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="summary-migration-indices.html"><a href="summary-migration-indices.html#background-1"><i class="fa fa-check"></i><b>5.1.1</b> Background</a></li>
<li class="chapter" data-level="5.1.2" data-path="summary-migration-indices.html"><a href="summary-migration-indices.html#background-2"><i class="fa fa-check"></i><b>5.1.2</b> Background</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="summary-migration-indices.html"><a href="summary-migration-indices.html#intensity"><i class="fa fa-check"></i><b>5.2</b> Intensity</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="summary-migration-indices.html"><a href="summary-migration-indices.html#migration-intensity"><i class="fa fa-check"></i><b>5.2.1</b> Migration intensity</a></li>
<li class="chapter" data-level="5.2.2" data-path="summary-migration-indices.html"><a href="summary-migration-indices.html#crude-migration-probability"><i class="fa fa-check"></i><b>5.2.2</b> Crude migration probability</a></li>
<li class="chapter" data-level="5.2.3" data-path="summary-migration-indices.html"><a href="summary-migration-indices.html#migration-intensity-1"><i class="fa fa-check"></i><b>5.2.3</b> Migration intensity</a></li>
<li class="chapter" data-level="5.2.4" data-path="summary-migration-indices.html"><a href="summary-migration-indices.html#migration-intensity-2"><i class="fa fa-check"></i><b>5.2.4</b> Migration intensity</a></li>
<li class="chapter" data-level="5.2.5" data-path="summary-migration-indices.html"><a href="summary-migration-indices.html#migration-intensity-3"><i class="fa fa-check"></i><b>5.2.5</b> Migration intensity</a></li>
<li class="chapter" data-level="5.2.6" data-path="summary-migration-indices.html"><a href="summary-migration-indices.html#migration-intensity-4"><i class="fa fa-check"></i><b>5.2.6</b> Migration intensity</a></li>
<li class="chapter" data-level="5.2.7" data-path="summary-migration-indices.html"><a href="summary-migration-indices.html#migration-intensity-5"><i class="fa fa-check"></i><b>5.2.7</b> Migration intensity</a></li>
<li class="chapter" data-level="5.2.8" data-path="summary-migration-indices.html"><a href="summary-migration-indices.html#migration-intensity-6"><i class="fa fa-check"></i><b>5.2.8</b> Migration intensity</a></li>
<li class="chapter" data-level="5.2.9" data-path="summary-migration-indices.html"><a href="summary-migration-indices.html#migration-intensity-7"><i class="fa fa-check"></i><b>5.2.9</b> Migration intensity</a></li>
<li class="chapter" data-level="5.2.10" data-path="summary-migration-indices.html"><a href="summary-migration-indices.html#migration-intensity-8"><i class="fa fa-check"></i><b>5.2.10</b> Migration intensity</a></li>
<li class="chapter" data-level="5.2.11" data-path="summary-migration-indices.html"><a href="summary-migration-indices.html#migration-intensity-9"><i class="fa fa-check"></i><b>5.2.11</b> Migration intensity</a></li>
<li class="chapter" data-level="5.2.12" data-path="summary-migration-indices.html"><a href="summary-migration-indices.html#migration-intensity-10"><i class="fa fa-check"></i><b>5.2.12</b> Migration intensity</a></li>
<li class="chapter" data-level="5.2.13" data-path="summary-migration-indices.html"><a href="summary-migration-indices.html#migration-intensity-11"><i class="fa fa-check"></i><b>5.2.13</b> Migration intensity</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="summary-migration-indices.html"><a href="summary-migration-indices.html#distance"><i class="fa fa-check"></i><b>5.3</b> Distance</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="summary-migration-indices.html"><a href="summary-migration-indices.html#migration-distance"><i class="fa fa-check"></i><b>5.3.1</b> Migration distance</a></li>
<li class="chapter" data-level="5.3.2" data-path="summary-migration-indices.html"><a href="summary-migration-indices.html#average-migration-distance"><i class="fa fa-check"></i><b>5.3.2</b> Average migration distance</a></li>
<li class="chapter" data-level="5.3.3" data-path="summary-migration-indices.html"><a href="summary-migration-indices.html#distance-decay"><i class="fa fa-check"></i><b>5.3.3</b> Distance decay</a></li>
<li class="chapter" data-level="5.3.4" data-path="summary-migration-indices.html"><a href="summary-migration-indices.html#migration-distance-1"><i class="fa fa-check"></i><b>5.3.4</b> Migration distance</a></li>
<li class="chapter" data-level="5.3.5" data-path="summary-migration-indices.html"><a href="summary-migration-indices.html#migration-distance-2"><i class="fa fa-check"></i><b>5.3.5</b> Migration distance</a></li>
<li class="chapter" data-level="5.3.6" data-path="summary-migration-indices.html"><a href="summary-migration-indices.html#migration-distance-3"><i class="fa fa-check"></i><b>5.3.6</b> Migration distance</a></li>
<li class="chapter" data-level="5.3.7" data-path="summary-migration-indices.html"><a href="summary-migration-indices.html#calculating-distances"><i class="fa fa-check"></i><b>5.3.7</b> Calculating distances</a></li>
<li class="chapter" data-level="5.3.8" data-path="summary-migration-indices.html"><a href="summary-migration-indices.html#calculating-distances-1"><i class="fa fa-check"></i><b>5.3.8</b> Calculating distances</a></li>
<li class="chapter" data-level="5.3.9" data-path="summary-migration-indices.html"><a href="summary-migration-indices.html#calculating-distances-2"><i class="fa fa-check"></i><b>5.3.9</b> Calculating distances</a></li>
<li class="chapter" data-level="5.3.10" data-path="summary-migration-indices.html"><a href="summary-migration-indices.html#calculating-distances-3"><i class="fa fa-check"></i><b>5.3.10</b> Calculating distances</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="summary-migration-indices.html"><a href="summary-migration-indices.html#connectivity"><i class="fa fa-check"></i><b>5.4</b> Connectivity</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="summary-migration-indices.html"><a href="summary-migration-indices.html#migration-connectivity"><i class="fa fa-check"></i><b>5.4.1</b> Migration connectivity</a></li>
<li class="chapter" data-level="5.4.2" data-path="summary-migration-indices.html"><a href="summary-migration-indices.html#migration-connectivity-1"><i class="fa fa-check"></i><b>5.4.2</b> Migration connectivity</a></li>
<li class="chapter" data-level="5.4.3" data-path="summary-migration-indices.html"><a href="summary-migration-indices.html#connectivity-and-inequality"><i class="fa fa-check"></i><b>5.4.3</b> Connectivity and Inequality</a></li>
<li class="chapter" data-level="5.4.4" data-path="summary-migration-indices.html"><a href="summary-migration-indices.html#gini-measures"><i class="fa fa-check"></i><b>5.4.4</b> Gini measures</a></li>
<li class="chapter" data-level="5.4.5" data-path="summary-migration-indices.html"><a href="summary-migration-indices.html#migration-totals-gini-and-coefficient-of-variation"><i class="fa fa-check"></i><b>5.4.5</b> Migration totals Gini and Coefficient of Variation</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="summary-migration-indices.html"><a href="summary-migration-indices.html#impact"><i class="fa fa-check"></i><b>5.5</b> Impact</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="summary-migration-indices.html"><a href="summary-migration-indices.html#migration-impact"><i class="fa fa-check"></i><b>5.5.1</b> Migration impact</a></li>
<li class="chapter" data-level="5.5.2" data-path="summary-migration-indices.html"><a href="summary-migration-indices.html#migration-effectiveness-index"><i class="fa fa-check"></i><b>5.5.2</b> Migration effectiveness index</a></li>
<li class="chapter" data-level="5.5.3" data-path="summary-migration-indices.html"><a href="summary-migration-indices.html#aggregate-net-migration-rate"><i class="fa fa-check"></i><b>5.5.3</b> Aggregate net migration rate</a></li>
<li class="chapter" data-level="5.5.4" data-path="summary-migration-indices.html"><a href="summary-migration-indices.html#preference-and-velocity"><i class="fa fa-check"></i><b>5.5.4</b> Preference and velocity</a></li>
<li class="chapter" data-level="5.5.5" data-path="summary-migration-indices.html"><a href="summary-migration-indices.html#migration-impact-1"><i class="fa fa-check"></i><b>5.5.5</b> Migration impact</a></li>
<li class="chapter" data-level="5.5.6" data-path="summary-migration-indices.html"><a href="summary-migration-indices.html#migration-impact-2"><i class="fa fa-check"></i><b>5.5.6</b> Migration impact</a></li>
<li class="chapter" data-level="5.5.7" data-path="summary-migration-indices.html"><a href="summary-migration-indices.html#migration-impact-3"><i class="fa fa-check"></i><b>5.5.7</b> Migration impact</a></li>
<li class="chapter" data-level="5.5.8" data-path="summary-migration-indices.html"><a href="summary-migration-indices.html#exercise-ex3.r"><i class="fa fa-check"></i><b>5.5.8</b> Exercise (ex3.R)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="estimating-net-migration.html"><a href="estimating-net-migration.html"><i class="fa fa-check"></i><b>6</b> Estimating Net Migration</a>
<ul>
<li class="chapter" data-level="6.1" data-path="estimating-net-migration.html"><a href="estimating-net-migration.html#net-migration"><i class="fa fa-check"></i><b>6.1</b> Net Migration</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="estimating-net-migration.html"><a href="estimating-net-migration.html#net-migration-1"><i class="fa fa-check"></i><b>6.1.1</b> Net migration</a></li>
<li class="chapter" data-level="6.1.2" data-path="estimating-net-migration.html"><a href="estimating-net-migration.html#net-migration-estimation"><i class="fa fa-check"></i><b>6.1.2</b> Net migration estimation</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="estimating-net-migration.html"><a href="estimating-net-migration.html#vital-statstics"><i class="fa fa-check"></i><b>6.2</b> Vital Statstics</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="estimating-net-migration.html"><a href="estimating-net-migration.html#vital-statsitics"><i class="fa fa-check"></i><b>6.2.1</b> Vital statsitics</a></li>
<li class="chapter" data-level="6.2.2" data-path="estimating-net-migration.html"><a href="estimating-net-migration.html#vital-statsitics-1"><i class="fa fa-check"></i><b>6.2.2</b> Vital statsitics</a></li>
<li class="chapter" data-level="6.2.3" data-path="estimating-net-migration.html"><a href="estimating-net-migration.html#vital-statsitics-2"><i class="fa fa-check"></i><b>6.2.3</b> Vital statsitics</a></li>
<li class="chapter" data-level="6.2.4" data-path="estimating-net-migration.html"><a href="estimating-net-migration.html#vital-statsitics-3"><i class="fa fa-check"></i><b>6.2.4</b> Vital statsitics</a></li>
<li class="chapter" data-level="6.2.5" data-path="estimating-net-migration.html"><a href="estimating-net-migration.html#difficulties"><i class="fa fa-check"></i><b>6.2.5</b> Difficulties</a></li>
<li class="chapter" data-level="6.2.6" data-path="estimating-net-migration.html"><a href="estimating-net-migration.html#difficulties-1"><i class="fa fa-check"></i><b>6.2.6</b> Difficulties</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="estimating-net-migration.html"><a href="estimating-net-migration.html#survival-methods"><i class="fa fa-check"></i><b>6.3</b> Survival Methods</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="estimating-net-migration.html"><a href="estimating-net-migration.html#survival-methods-1"><i class="fa fa-check"></i><b>6.3.1</b> Survival methods</a></li>
<li class="chapter" data-level="6.3.2" data-path="estimating-net-migration.html"><a href="estimating-net-migration.html#forward-survival-ratios"><i class="fa fa-check"></i><b>6.3.2</b> Forward survival ratios</a></li>
<li class="chapter" data-level="6.3.3" data-path="estimating-net-migration.html"><a href="estimating-net-migration.html#reverse-survival-ratios"><i class="fa fa-check"></i><b>6.3.3</b> Reverse survival ratios</a></li>
<li class="chapter" data-level="6.3.4" data-path="estimating-net-migration.html"><a href="estimating-net-migration.html#average-survival-ratios"><i class="fa fa-check"></i><b>6.3.4</b> Average survival ratios</a></li>
<li class="chapter" data-level="6.3.5" data-path="estimating-net-migration.html"><a href="estimating-net-migration.html#survival-methods-in-r"><i class="fa fa-check"></i><b>6.3.5</b> Survival methods in R</a></li>
<li class="chapter" data-level="6.3.6" data-path="estimating-net-migration.html"><a href="estimating-net-migration.html#survival-methods-in-r-1"><i class="fa fa-check"></i><b>6.3.6</b> Survival methods in R</a></li>
<li class="chapter" data-level="6.3.7" data-path="estimating-net-migration.html"><a href="estimating-net-migration.html#survival-methods-in-r-2"><i class="fa fa-check"></i><b>6.3.7</b> Survival methods in R</a></li>
<li class="chapter" data-level="6.3.8" data-path="estimating-net-migration.html"><a href="estimating-net-migration.html#survival-methods-in-r-3"><i class="fa fa-check"></i><b>6.3.8</b> Survival methods in R</a></li>
<li class="chapter" data-level="6.3.9" data-path="estimating-net-migration.html"><a href="estimating-net-migration.html#survival-methods-in-r-4"><i class="fa fa-check"></i><b>6.3.9</b> Survival methods in R</a></li>
<li class="chapter" data-level="6.3.10" data-path="estimating-net-migration.html"><a href="estimating-net-migration.html#survival-ratios"><i class="fa fa-check"></i><b>6.3.10</b> Survival ratios</a></li>
<li class="chapter" data-level="6.3.11" data-path="estimating-net-migration.html"><a href="estimating-net-migration.html#life-table-survival-ratios"><i class="fa fa-check"></i><b>6.3.11</b> Life table survival ratios</a></li>
<li class="chapter" data-level="6.3.12" data-path="estimating-net-migration.html"><a href="estimating-net-migration.html#census-survival-ratios"><i class="fa fa-check"></i><b>6.3.12</b> Census survival ratios</a></li>
<li class="chapter" data-level="6.3.13" data-path="estimating-net-migration.html"><a href="estimating-net-migration.html#age-specfic-birthplace-data"><i class="fa fa-check"></i><b>6.3.13</b> Age-specfic birthplace data</a></li>
<li class="chapter" data-level="6.3.14" data-path="estimating-net-migration.html"><a href="estimating-net-migration.html#age-specfic-birthplace-data-1"><i class="fa fa-check"></i><b>6.3.14</b> Age-specfic birthplace data</a></li>
<li class="chapter" data-level="6.3.15" data-path="estimating-net-migration.html"><a href="estimating-net-migration.html#census-survival-ratios-1"><i class="fa fa-check"></i><b>6.3.15</b> Census survival ratios</a></li>
<li class="chapter" data-level="6.3.16" data-path="estimating-net-migration.html"><a href="estimating-net-migration.html#limitations-of-census-survival-ratios"><i class="fa fa-check"></i><b>6.3.16</b> Limitations of census survival ratios</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="estimating-net-migration.html"><a href="estimating-net-migration.html#birthplace"><i class="fa fa-check"></i><b>6.4</b> Birthplace</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="estimating-net-migration.html"><a href="estimating-net-migration.html#birthplace-1"><i class="fa fa-check"></i><b>6.4.1</b> Birthplace</a></li>
<li class="chapter" data-level="6.4.2" data-path="estimating-net-migration.html"><a href="estimating-net-migration.html#birthplace-totals"><i class="fa fa-check"></i><b>6.4.2</b> Birthplace totals</a></li>
<li class="chapter" data-level="6.4.3" data-path="estimating-net-migration.html"><a href="estimating-net-migration.html#birthplace-totals-1"><i class="fa fa-check"></i><b>6.4.3</b> Birthplace totals</a></li>
<li class="chapter" data-level="6.4.4" data-path="estimating-net-migration.html"><a href="estimating-net-migration.html#birthplace-totals-2"><i class="fa fa-check"></i><b>6.4.4</b> Birthplace totals</a></li>
<li class="chapter" data-level="6.4.5" data-path="estimating-net-migration.html"><a href="estimating-net-migration.html#birthplace-totals-3"><i class="fa fa-check"></i><b>6.4.5</b> Birthplace totals</a></li>
<li class="chapter" data-level="6.4.6" data-path="estimating-net-migration.html"><a href="estimating-net-migration.html#birthplace-totals-4"><i class="fa fa-check"></i><b>6.4.6</b> Birthplace totals</a></li>
<li class="chapter" data-level="6.4.7" data-path="estimating-net-migration.html"><a href="estimating-net-migration.html#birthplace-totals-5"><i class="fa fa-check"></i><b>6.4.7</b> Birthplace totals</a></li>
<li class="chapter" data-level="6.4.8" data-path="estimating-net-migration.html"><a href="estimating-net-migration.html#age-specfic-birthplace-data-2"><i class="fa fa-check"></i><b>6.4.8</b> Age-specfic birthplace data</a></li>
<li class="chapter" data-level="6.4.9" data-path="estimating-net-migration.html"><a href="estimating-net-migration.html#age-specfic-birthplace-data-3"><i class="fa fa-check"></i><b>6.4.9</b> Age-specfic birthplace data</a></li>
<li class="chapter" data-level="6.4.10" data-path="estimating-net-migration.html"><a href="estimating-net-migration.html#age-specfic-birthplace-data-4"><i class="fa fa-check"></i><b>6.4.10</b> Age-specfic birthplace data</a></li>
<li class="chapter" data-level="6.4.11" data-path="estimating-net-migration.html"><a href="estimating-net-migration.html#exercise-ex4.r"><i class="fa fa-check"></i><b>6.4.11</b> Exercise (ex4.R)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="describing-and-estimating-migration-age-structures.html"><a href="describing-and-estimating-migration-age-structures.html"><i class="fa fa-check"></i><b>7</b> Describing and Estimating Migration Age Structures</a>
<ul>
<li class="chapter" data-level="7.1" data-path="describing-and-estimating-migration-age-structures.html"><a href="describing-and-estimating-migration-age-structures.html#rogers-castro"><i class="fa fa-check"></i><b>7.1</b> Rogers Castro</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="describing-and-estimating-migration-age-structures.html"><a href="describing-and-estimating-migration-age-structures.html#rogers-castro-migration-age-schedules"><i class="fa fa-check"></i><b>7.1.1</b> Rogers Castro migration age schedules</a></li>
<li class="chapter" data-level="7.1.2" data-path="describing-and-estimating-migration-age-structures.html"><a href="describing-and-estimating-migration-age-structures.html#rogers-castro-migration-age-schedules-1"><i class="fa fa-check"></i><b>7.1.2</b> Rogers Castro migration age schedules</a></li>
<li class="chapter" data-level="7.1.3" data-path="describing-and-estimating-migration-age-structures.html"><a href="describing-and-estimating-migration-age-structures.html#rogers-castro-migration-age-schedules-2"><i class="fa fa-check"></i><b>7.1.3</b> Rogers Castro migration age schedules</a></li>
<li class="chapter" data-level="7.1.4" data-path="describing-and-estimating-migration-age-structures.html"><a href="describing-and-estimating-migration-age-structures.html#rogers-castro-migration-age-schedules-3"><i class="fa fa-check"></i><b>7.1.4</b> Rogers Castro migration age schedules</a></li>
<li class="chapter" data-level="7.1.5" data-path="describing-and-estimating-migration-age-structures.html"><a href="describing-and-estimating-migration-age-structures.html#rogers-castro-migration-age-schedules-4"><i class="fa fa-check"></i><b>7.1.5</b> Rogers Castro migration age schedules</a></li>
<li class="chapter" data-level="7.1.6" data-path="describing-and-estimating-migration-age-structures.html"><a href="describing-and-estimating-migration-age-structures.html#rogers-castro-migration-age-schedules-5"><i class="fa fa-check"></i><b>7.1.6</b> Rogers Castro migration age schedules</a></li>
<li class="chapter" data-level="7.1.7" data-path="describing-and-estimating-migration-age-structures.html"><a href="describing-and-estimating-migration-age-structures.html#rogers-castro-migration-age-schedules-6"><i class="fa fa-check"></i><b>7.1.7</b> Rogers Castro migration age schedules</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="describing-and-estimating-migration-age-structures.html"><a href="describing-and-estimating-migration-age-structures.html#model-schedules"><i class="fa fa-check"></i><b>7.2</b> Model schedules</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="describing-and-estimating-migration-age-structures.html"><a href="describing-and-estimating-migration-age-structures.html#model-migration-age-schedules"><i class="fa fa-check"></i><b>7.2.1</b> Model migration age schedules</a></li>
<li class="chapter" data-level="7.2.2" data-path="describing-and-estimating-migration-age-structures.html"><a href="describing-and-estimating-migration-age-structures.html#model-migration-age-schedules-1"><i class="fa fa-check"></i><b>7.2.2</b> Model migration age schedules</a></li>
<li class="chapter" data-level="7.2.3" data-path="describing-and-estimating-migration-age-structures.html"><a href="describing-and-estimating-migration-age-structures.html#model-migration-age-schedules-2"><i class="fa fa-check"></i><b>7.2.3</b> Model migration age schedules</a></li>
<li class="chapter" data-level="7.2.4" data-path="describing-and-estimating-migration-age-structures.html"><a href="describing-and-estimating-migration-age-structures.html#model-migration-age-schedules-3"><i class="fa fa-check"></i><b>7.2.4</b> Model migration age schedules</a></li>
<li class="chapter" data-level="7.2.5" data-path="describing-and-estimating-migration-age-structures.html"><a href="describing-and-estimating-migration-age-structures.html#model-migration-age-schedules-4"><i class="fa fa-check"></i><b>7.2.5</b> Model migration age schedules</a></li>
<li class="chapter" data-level="7.2.6" data-path="describing-and-estimating-migration-age-structures.html"><a href="describing-and-estimating-migration-age-structures.html#model-migration-age-schedules-5"><i class="fa fa-check"></i><b>7.2.6</b> Model migration age schedules</a></li>
<li class="chapter" data-level="7.2.7" data-path="describing-and-estimating-migration-age-structures.html"><a href="describing-and-estimating-migration-age-structures.html#model-migration-age-schedules-6"><i class="fa fa-check"></i><b>7.2.7</b> Model migration age schedules</a></li>
<li class="chapter" data-level="7.2.8" data-path="describing-and-estimating-migration-age-structures.html"><a href="describing-and-estimating-migration-age-structures.html#model-migration-age-schedules-7"><i class="fa fa-check"></i><b>7.2.8</b> Model migration age schedules</a></li>
<li class="chapter" data-level="7.2.9" data-path="describing-and-estimating-migration-age-structures.html"><a href="describing-and-estimating-migration-age-structures.html#model-migration-age-schedules-8"><i class="fa fa-check"></i><b>7.2.9</b> Model migration age schedules</a></li>
<li class="chapter" data-level="7.2.10" data-path="describing-and-estimating-migration-age-structures.html"><a href="describing-and-estimating-migration-age-structures.html#model-migration-age-schedules-9"><i class="fa fa-check"></i><b>7.2.10</b> Model migration age schedules</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="describing-and-estimating-migration-age-structures.html"><a href="describing-and-estimating-migration-age-structures.html#fitting-schedules"><i class="fa fa-check"></i><b>7.3</b> Fitting schedules</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="describing-and-estimating-migration-age-structures.html"><a href="describing-and-estimating-migration-age-structures.html#fitting-roger-castro-migration-age-schedules"><i class="fa fa-check"></i><b>7.3.1</b> Fitting Roger Castro migration age schedules</a></li>
<li class="chapter" data-level="7.3.2" data-path="describing-and-estimating-migration-age-structures.html"><a href="describing-and-estimating-migration-age-structures.html#fitting-roger-castro-migration-age-schedules-1"><i class="fa fa-check"></i><b>7.3.2</b> Fitting Roger Castro migration age schedules</a></li>
<li class="chapter" data-level="7.3.3" data-path="describing-and-estimating-migration-age-structures.html"><a href="describing-and-estimating-migration-age-structures.html#fitting-roger-castro-migration-age-schedules-2"><i class="fa fa-check"></i><b>7.3.3</b> Fitting Roger Castro migration age schedules</a></li>
<li class="chapter" data-level="7.3.4" data-path="describing-and-estimating-migration-age-structures.html"><a href="describing-and-estimating-migration-age-structures.html#fitting-roger-castro-migration-age-schedules-3"><i class="fa fa-check"></i><b>7.3.4</b> Fitting Roger Castro migration age schedules</a></li>
<li class="chapter" data-level="7.3.5" data-path="describing-and-estimating-migration-age-structures.html"><a href="describing-and-estimating-migration-age-structures.html#fitting-roger-castro-migration-age-schedules-4"><i class="fa fa-check"></i><b>7.3.5</b> Fitting Roger Castro migration age schedules</a></li>
<li class="chapter" data-level="7.3.6" data-path="describing-and-estimating-migration-age-structures.html"><a href="describing-and-estimating-migration-age-structures.html#fitting-roger-castro-migration-age-schedules-5"><i class="fa fa-check"></i><b>7.3.6</b> Fitting Roger Castro migration age schedules</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="describing-and-estimating-migration-age-structures.html"><a href="describing-and-estimating-migration-age-structures.html#age-indices"><i class="fa fa-check"></i><b>7.4</b> Age Indices</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="describing-and-estimating-migration-age-structures.html"><a href="describing-and-estimating-migration-age-structures.html#age-indices-1"><i class="fa fa-check"></i><b>7.4.1</b> Age Indices</a></li>
<li class="chapter" data-level="7.4.2" data-path="describing-and-estimating-migration-age-structures.html"><a href="describing-and-estimating-migration-age-structures.html#age-indices-2"><i class="fa fa-check"></i><b>7.4.2</b> Age Indices</a></li>
<li class="chapter" data-level="7.4.3" data-path="describing-and-estimating-migration-age-structures.html"><a href="describing-and-estimating-migration-age-structures.html#age-indices-3"><i class="fa fa-check"></i><b>7.4.3</b> Age Indices</a></li>
<li class="chapter" data-level="7.4.4" data-path="describing-and-estimating-migration-age-structures.html"><a href="describing-and-estimating-migration-age-structures.html#age-indices-4"><i class="fa fa-check"></i><b>7.4.4</b> Age Indices</a></li>
<li class="chapter" data-level="7.4.5" data-path="describing-and-estimating-migration-age-structures.html"><a href="describing-and-estimating-migration-age-structures.html#age-indices-5"><i class="fa fa-check"></i><b>7.4.5</b> Age Indices</a></li>
<li class="chapter" data-level="7.4.6" data-path="describing-and-estimating-migration-age-structures.html"><a href="describing-and-estimating-migration-age-structures.html#age-indices-6"><i class="fa fa-check"></i><b>7.4.6</b> Age Indices</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="describing-and-estimating-migration-age-structures.html"><a href="describing-and-estimating-migration-age-structures.html#smoothing"><i class="fa fa-check"></i><b>7.5</b> Smoothing</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="describing-and-estimating-migration-age-structures.html"><a href="describing-and-estimating-migration-age-structures.html#general-purpose-smoothing-functions"><i class="fa fa-check"></i><b>7.5.1</b> General purpose smoothing functions</a></li>
<li class="chapter" data-level="7.5.2" data-path="describing-and-estimating-migration-age-structures.html"><a href="describing-and-estimating-migration-age-structures.html#general-purpose-smoothing-functions-1"><i class="fa fa-check"></i><b>7.5.2</b> General purpose smoothing functions</a></li>
<li class="chapter" data-level="7.5.3" data-path="describing-and-estimating-migration-age-structures.html"><a href="describing-and-estimating-migration-age-structures.html#general-purpose-smoothing-functions-2"><i class="fa fa-check"></i><b>7.5.3</b> General purpose smoothing functions</a></li>
<li class="chapter" data-level="7.5.4" data-path="describing-and-estimating-migration-age-structures.html"><a href="describing-and-estimating-migration-age-structures.html#general-purpose-smoothing-functions-3"><i class="fa fa-check"></i><b>7.5.4</b> General purpose smoothing functions</a></li>
<li class="chapter" data-level="7.5.5" data-path="describing-and-estimating-migration-age-structures.html"><a href="describing-and-estimating-migration-age-structures.html#kernal-smoothing"><i class="fa fa-check"></i><b>7.5.5</b> Kernal smoothing</a></li>
<li class="chapter" data-level="7.5.6" data-path="describing-and-estimating-migration-age-structures.html"><a href="describing-and-estimating-migration-age-structures.html#kernal-smoothing-1"><i class="fa fa-check"></i><b>7.5.6</b> Kernal smoothing</a></li>
<li class="chapter" data-level="7.5.7" data-path="describing-and-estimating-migration-age-structures.html"><a href="describing-and-estimating-migration-age-structures.html#loess-smoothing"><i class="fa fa-check"></i><b>7.5.7</b> Loess smoothing</a></li>
<li class="chapter" data-level="7.5.8" data-path="describing-and-estimating-migration-age-structures.html"><a href="describing-and-estimating-migration-age-structures.html#loess-smoothing-1"><i class="fa fa-check"></i><b>7.5.8</b> Loess smoothing</a></li>
<li class="chapter" data-level="7.5.9" data-path="describing-and-estimating-migration-age-structures.html"><a href="describing-and-estimating-migration-age-structures.html#cubic-spline-smoothing"><i class="fa fa-check"></i><b>7.5.9</b> Cubic spline smoothing</a></li>
<li class="chapter" data-level="7.5.10" data-path="describing-and-estimating-migration-age-structures.html"><a href="describing-and-estimating-migration-age-structures.html#cubic-spline-smoothing-1"><i class="fa fa-check"></i><b>7.5.10</b> Cubic spline smoothing</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="describing-and-estimating-migration-age-structures.html"><a href="describing-and-estimating-migration-age-structures.html#graduating"><i class="fa fa-check"></i><b>7.6</b> Graduating</a>
<ul>
<li class="chapter" data-level="7.6.1" data-path="describing-and-estimating-migration-age-structures.html"><a href="describing-and-estimating-migration-age-structures.html#graduating-1"><i class="fa fa-check"></i><b>7.6.1</b> Graduating</a></li>
<li class="chapter" data-level="7.6.2" data-path="describing-and-estimating-migration-age-structures.html"><a href="describing-and-estimating-migration-age-structures.html#graduating-2"><i class="fa fa-check"></i><b>7.6.2</b> Graduating</a></li>
<li class="chapter" data-level="7.6.3" data-path="describing-and-estimating-migration-age-structures.html"><a href="describing-and-estimating-migration-age-structures.html#graduating-3"><i class="fa fa-check"></i><b>7.6.3</b> Graduating</a></li>
<li class="chapter" data-level="7.6.4" data-path="describing-and-estimating-migration-age-structures.html"><a href="describing-and-estimating-migration-age-structures.html#graduating-4"><i class="fa fa-check"></i><b>7.6.4</b> Graduating</a></li>
<li class="chapter" data-level="7.6.5" data-path="describing-and-estimating-migration-age-structures.html"><a href="describing-and-estimating-migration-age-structures.html#exercise-5-ex5.r"><i class="fa fa-check"></i><b>7.6.5</b> Exercise 5 (ex5.R)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="describing-bilteral-migration-data.html"><a href="describing-bilteral-migration-data.html"><i class="fa fa-check"></i><b>8</b> Describing Bilteral Migration Data</a>
<ul>
<li class="chapter" data-level="8.1" data-path="describing-bilteral-migration-data.html"><a href="describing-bilteral-migration-data.html#components"><i class="fa fa-check"></i><b>8.1</b> Components</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="describing-bilteral-migration-data.html"><a href="describing-bilteral-migration-data.html#multiplicative-component-model"><i class="fa fa-check"></i><b>8.1.1</b> Multiplicative Component Model</a></li>
<li class="chapter" data-level="8.1.2" data-path="describing-bilteral-migration-data.html"><a href="describing-bilteral-migration-data.html#multiplicative-component-model-1"><i class="fa fa-check"></i><b>8.1.2</b> Multiplicative Component Model</a></li>
<li class="chapter" data-level="8.1.3" data-path="describing-bilteral-migration-data.html"><a href="describing-bilteral-migration-data.html#multiplicative-component-model-2"><i class="fa fa-check"></i><b>8.1.3</b> Multiplicative Component Model</a></li>
<li class="chapter" data-level="8.1.4" data-path="describing-bilteral-migration-data.html"><a href="describing-bilteral-migration-data.html#multiplicative-component-model-3"><i class="fa fa-check"></i><b>8.1.4</b> Multiplicative Component Model</a></li>
<li class="chapter" data-level="8.1.5" data-path="describing-bilteral-migration-data.html"><a href="describing-bilteral-migration-data.html#multiplicative-component-model-4"><i class="fa fa-check"></i><b>8.1.5</b> Multiplicative Component Model</a></li>
<li class="chapter" data-level="8.1.6" data-path="describing-bilteral-migration-data.html"><a href="describing-bilteral-migration-data.html#multiplicative-component-model-5"><i class="fa fa-check"></i><b>8.1.6</b> Multiplicative Component Model</a></li>
<li class="chapter" data-level="8.1.7" data-path="describing-bilteral-migration-data.html"><a href="describing-bilteral-migration-data.html#multiplicative-component-model-6"><i class="fa fa-check"></i><b>8.1.7</b> Multiplicative Component Model</a></li>
<li class="chapter" data-level="8.1.8" data-path="describing-bilteral-migration-data.html"><a href="describing-bilteral-migration-data.html#multiplicative-component-model-7"><i class="fa fa-check"></i><b>8.1.8</b> Multiplicative Component Model</a></li>
<li class="chapter" data-level="8.1.9" data-path="describing-bilteral-migration-data.html"><a href="describing-bilteral-migration-data.html#multiplicative-component-model-8"><i class="fa fa-check"></i><b>8.1.9</b> Multiplicative Component Model</a></li>
<li class="chapter" data-level="8.1.10" data-path="describing-bilteral-migration-data.html"><a href="describing-bilteral-migration-data.html#multiplicative-component-model-9"><i class="fa fa-check"></i><b>8.1.10</b> Multiplicative Component Model</a></li>
<li class="chapter" data-level="8.1.11" data-path="describing-bilteral-migration-data.html"><a href="describing-bilteral-migration-data.html#multiplicative-component-model-10"><i class="fa fa-check"></i><b>8.1.11</b> Multiplicative Component Model</a></li>
<li class="chapter" data-level="8.1.12" data-path="describing-bilteral-migration-data.html"><a href="describing-bilteral-migration-data.html#multiplicative-component-model-11"><i class="fa fa-check"></i><b>8.1.12</b> Multiplicative Component Model</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="describing-bilteral-migration-data.html"><a href="describing-bilteral-migration-data.html#log-linear-models"><i class="fa fa-check"></i><b>8.2</b> Log-Linear Models</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="describing-bilteral-migration-data.html"><a href="describing-bilteral-migration-data.html#log-linear-models-1"><i class="fa fa-check"></i><b>8.2.1</b> Log-Linear Models</a></li>
<li class="chapter" data-level="8.2.2" data-path="describing-bilteral-migration-data.html"><a href="describing-bilteral-migration-data.html#log-linear-models-2"><i class="fa fa-check"></i><b>8.2.2</b> Log-Linear Models</a></li>
<li class="chapter" data-level="8.2.3" data-path="describing-bilteral-migration-data.html"><a href="describing-bilteral-migration-data.html#log-linear-models-3"><i class="fa fa-check"></i><b>8.2.3</b> Log-Linear Models</a></li>
<li class="chapter" data-level="8.2.4" data-path="describing-bilteral-migration-data.html"><a href="describing-bilteral-migration-data.html#log-linear-models-4"><i class="fa fa-check"></i><b>8.2.4</b> Log-Linear Models</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="describing-bilteral-migration-data.html"><a href="describing-bilteral-migration-data.html#dimensions"><i class="fa fa-check"></i><b>8.3</b> Dimensions</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="describing-bilteral-migration-data.html"><a href="describing-bilteral-migration-data.html#log-linear-model-analysis"><i class="fa fa-check"></i><b>8.3.1</b> Log-Linear Model Analysis</a></li>
<li class="chapter" data-level="8.3.2" data-path="describing-bilteral-migration-data.html"><a href="describing-bilteral-migration-data.html#log-linear-model-analysis-1"><i class="fa fa-check"></i><b>8.3.2</b> Log-Linear Model Analysis</a></li>
<li class="chapter" data-level="8.3.3" data-path="describing-bilteral-migration-data.html"><a href="describing-bilteral-migration-data.html#log-linear-model-analysis-2"><i class="fa fa-check"></i><b>8.3.3</b> Log-Linear Model Analysis</a></li>
<li class="chapter" data-level="8.3.4" data-path="describing-bilteral-migration-data.html"><a href="describing-bilteral-migration-data.html#log-linear-model-analysis-3"><i class="fa fa-check"></i><b>8.3.4</b> Log-Linear Model Analysis</a></li>
<li class="chapter" data-level="8.3.5" data-path="describing-bilteral-migration-data.html"><a href="describing-bilteral-migration-data.html#log-linear-model-analysis-4"><i class="fa fa-check"></i><b>8.3.5</b> Log-Linear Model Analysis</a></li>
<li class="chapter" data-level="8.3.6" data-path="describing-bilteral-migration-data.html"><a href="describing-bilteral-migration-data.html#log-linear-model-analysis-5"><i class="fa fa-check"></i><b>8.3.6</b> Log-Linear Model Analysis</a></li>
<li class="chapter" data-level="8.3.7" data-path="describing-bilteral-migration-data.html"><a href="describing-bilteral-migration-data.html#log-linear-model-analysis-6"><i class="fa fa-check"></i><b>8.3.7</b> Log-Linear Model Analysis</a></li>
<li class="chapter" data-level="8.3.8" data-path="describing-bilteral-migration-data.html"><a href="describing-bilteral-migration-data.html#exercise-ex6.r"><i class="fa fa-check"></i><b>8.3.8</b> Exercise (ex6.R)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="estimating-bilateral-migration.html"><a href="estimating-bilateral-migration.html"><i class="fa fa-check"></i><b>9</b> Estimating Bilateral Migration</a>
<ul>
<li class="chapter" data-level="9.1" data-path="estimating-bilateral-migration.html"><a href="estimating-bilateral-migration.html#ipfp"><i class="fa fa-check"></i><b>9.1</b> IPFP</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="estimating-bilateral-migration.html"><a href="estimating-bilateral-migration.html#ipfp-1"><i class="fa fa-check"></i><b>9.1.1</b> IPFP</a></li>
<li class="chapter" data-level="9.1.2" data-path="estimating-bilateral-migration.html"><a href="estimating-bilateral-migration.html#ipfp-2"><i class="fa fa-check"></i><b>9.1.2</b> IPFP</a></li>
<li class="chapter" data-level="9.1.3" data-path="estimating-bilateral-migration.html"><a href="estimating-bilateral-migration.html#ipfp-3"><i class="fa fa-check"></i><b>9.1.3</b> IPFP</a></li>
<li class="chapter" data-level="9.1.4" data-path="estimating-bilateral-migration.html"><a href="estimating-bilateral-migration.html#ipfp-4"><i class="fa fa-check"></i><b>9.1.4</b> IPFP</a></li>
<li class="chapter" data-level="9.1.5" data-path="estimating-bilateral-migration.html"><a href="estimating-bilateral-migration.html#ipfp-5"><i class="fa fa-check"></i><b>9.1.5</b> IPFP</a></li>
<li class="chapter" data-level="9.1.6" data-path="estimating-bilateral-migration.html"><a href="estimating-bilateral-migration.html#mipfp"><i class="fa fa-check"></i><b>9.1.6</b> mipfp</a></li>
<li class="chapter" data-level="9.1.7" data-path="estimating-bilateral-migration.html"><a href="estimating-bilateral-migration.html#mipfp-1"><i class="fa fa-check"></i><b>9.1.7</b> mipfp</a></li>
<li class="chapter" data-level="9.1.8" data-path="estimating-bilateral-migration.html"><a href="estimating-bilateral-migration.html#mipfp-2"><i class="fa fa-check"></i><b>9.1.8</b> mipfp</a></li>
<li class="chapter" data-level="9.1.9" data-path="estimating-bilateral-migration.html"><a href="estimating-bilateral-migration.html#mipfp-3"><i class="fa fa-check"></i><b>9.1.9</b> mipfp</a></li>
<li class="chapter" data-level="9.1.10" data-path="estimating-bilateral-migration.html"><a href="estimating-bilateral-migration.html#mipfp-4"><i class="fa fa-check"></i><b>9.1.10</b> mipfp</a></li>
<li class="chapter" data-level="9.1.11" data-path="estimating-bilateral-migration.html"><a href="estimating-bilateral-migration.html#three-dimensions"><i class="fa fa-check"></i><b>9.1.11</b> Three dimensions</a></li>
<li class="chapter" data-level="9.1.12" data-path="estimating-bilateral-migration.html"><a href="estimating-bilateral-migration.html#ipfp-more-complicated-data-situations"><i class="fa fa-check"></i><b>9.1.12</b> IPFP More Complicated Data Situations</a></li>
<li class="chapter" data-level="9.1.13" data-path="estimating-bilateral-migration.html"><a href="estimating-bilateral-migration.html#estimating-detailed-bilateral-migration"><i class="fa fa-check"></i><b>9.1.13</b> Estimating Detailed Bilateral Migration</a></li>
<li class="chapter" data-level="9.1.14" data-path="estimating-bilateral-migration.html"><a href="estimating-bilateral-migration.html#mipfp-5"><i class="fa fa-check"></i><b>9.1.14</b> mipfp</a></li>
<li class="chapter" data-level="9.1.15" data-path="estimating-bilateral-migration.html"><a href="estimating-bilateral-migration.html#mipfp-6"><i class="fa fa-check"></i><b>9.1.15</b> mipfp</a></li>
<li class="chapter" data-level="9.1.16" data-path="estimating-bilateral-migration.html"><a href="estimating-bilateral-migration.html#mipfp-7"><i class="fa fa-check"></i><b>9.1.16</b> mipfp</a></li>
<li class="chapter" data-level="9.1.17" data-path="estimating-bilateral-migration.html"><a href="estimating-bilateral-migration.html#mipfp-8"><i class="fa fa-check"></i><b>9.1.17</b> mipfp</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="estimating-bilateral-migration.html"><a href="estimating-bilateral-migration.html#net-constraints"><i class="fa fa-check"></i><b>9.2</b> Net Constraints</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="estimating-bilateral-migration.html"><a href="estimating-bilateral-migration.html#net-constrained-origin-destination-flows"><i class="fa fa-check"></i><b>9.2.1</b> Net constrained origin-destination flows</a></li>
<li class="chapter" data-level="9.2.2" data-path="estimating-bilateral-migration.html"><a href="estimating-bilateral-migration.html#net-constrained-origin-destination-flows-1"><i class="fa fa-check"></i><b>9.2.2</b> Net constrained origin-destination flows</a></li>
<li class="chapter" data-level="9.2.3" data-path="estimating-bilateral-migration.html"><a href="estimating-bilateral-migration.html#net-constrained-origin-destination-flows-2"><i class="fa fa-check"></i><b>9.2.3</b> Net constrained origin-destination flows</a></li>
<li class="chapter" data-level="9.2.4" data-path="estimating-bilateral-migration.html"><a href="estimating-bilateral-migration.html#net-constrained-origin-destination-flows-3"><i class="fa fa-check"></i><b>9.2.4</b> Net constrained origin-destination flows</a></li>
<li class="chapter" data-level="9.2.5" data-path="estimating-bilateral-migration.html"><a href="estimating-bilateral-migration.html#net-constrained-origin-destination-flows-4"><i class="fa fa-check"></i><b>9.2.5</b> Net constrained origin-destination flows</a></li>
<li class="chapter" data-level="9.2.6" data-path="estimating-bilateral-migration.html"><a href="estimating-bilateral-migration.html#exercise-ex7.r"><i class="fa fa-check"></i><b>9.2.6</b> Exercise (ex7.R)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="chord-diagrams-for-visualising-bilateral-migration.html"><a href="chord-diagrams-for-visualising-bilateral-migration.html"><i class="fa fa-check"></i><b>10</b> Chord Diagrams for Visualising Bilateral Migration</a>
<ul>
<li class="chapter" data-level="10.1" data-path="chord-diagrams-for-visualising-bilateral-migration.html"><a href="chord-diagrams-for-visualising-bilateral-migration.html#section-1"><i class="fa fa-check"></i><b>10.1</b> .</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="chord-diagrams-for-visualising-bilateral-migration.html"><a href="chord-diagrams-for-visualising-bilateral-migration.html#background-3"><i class="fa fa-check"></i><b>10.1.1</b> Background</a></li>
<li class="chapter" data-level="10.1.2" data-path="chord-diagrams-for-visualising-bilateral-migration.html"><a href="chord-diagrams-for-visualising-bilateral-migration.html#map-based---the-emigrants-of-the-world-minard-1858."><i class="fa fa-check"></i><b>10.1.2</b> Map Based - The Emigrants of the World, Minard 1858.</a></li>
<li class="chapter" data-level="10.1.3" data-path="chord-diagrams-for-visualising-bilateral-migration.html"><a href="chord-diagrams-for-visualising-bilateral-migration.html#flowline-maps"><i class="fa fa-check"></i><b>10.1.3</b> Flowline Maps</a></li>
<li class="chapter" data-level="10.1.4" data-path="chord-diagrams-for-visualising-bilateral-migration.html"><a href="chord-diagrams-for-visualising-bilateral-migration.html#criticised-new-york-times-refugee-flow-map"><i class="fa fa-check"></i><b>10.1.4</b> Criticised New York Times refugee flow map</a></li>
<li class="chapter" data-level="10.1.5" data-path="chord-diagrams-for-visualising-bilateral-migration.html"><a href="chord-diagrams-for-visualising-bilateral-migration.html#martin-grandjeans-attempt-to-rectify"><i class="fa fa-check"></i><b>10.1.5</b> Martin Grandjeans attempt to rectify</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="chord-diagrams-for-visualising-bilateral-migration.html"><a href="chord-diagrams-for-visualising-bilateral-migration.html#chord-diagram"><i class="fa fa-check"></i><b>10.2</b> Chord Diagram</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="chord-diagrams-for-visualising-bilateral-migration.html"><a href="chord-diagrams-for-visualising-bilateral-migration.html#chord-diagrams"><i class="fa fa-check"></i><b>10.2.1</b> Chord Diagrams</a></li>
<li class="chapter" data-level="10.2.2" data-path="chord-diagrams-for-visualising-bilateral-migration.html"><a href="chord-diagrams-for-visualising-bilateral-migration.html#new-york-times-2007"><i class="fa fa-check"></i><b>10.2.2</b> New York Times 2007</a></li>
<li class="chapter" data-level="10.2.3" data-path="chord-diagrams-for-visualising-bilateral-migration.html"><a href="chord-diagrams-for-visualising-bilateral-migration.html#chord-diagrams-with-migration-data"><i class="fa fa-check"></i><b>10.2.3</b> Chord Diagrams with Migration Data</a></li>
<li class="chapter" data-level="10.2.4" data-path="chord-diagrams-for-visualising-bilateral-migration.html"><a href="chord-diagrams-for-visualising-bilateral-migration.html#chord-diagrams-with-migration-data-1"><i class="fa fa-check"></i><b>10.2.4</b> Chord Diagrams with Migration Data</a></li>
<li class="chapter" data-level="10.2.5" data-path="chord-diagrams-for-visualising-bilateral-migration.html"><a href="chord-diagrams-for-visualising-bilateral-migration.html#chord-diagrams-with-migration-data-2"><i class="fa fa-check"></i><b>10.2.5</b> Chord Diagrams with Migration Data</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="chord-diagrams-for-visualising-bilateral-migration.html"><a href="chord-diagrams-for-visualising-bilateral-migration.html#circlize"><i class="fa fa-check"></i><b>10.3</b> circlize</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="chord-diagrams-for-visualising-bilateral-migration.html"><a href="chord-diagrams-for-visualising-bilateral-migration.html#chord-diagrams-in-r"><i class="fa fa-check"></i><b>10.3.1</b> Chord Diagrams in R</a></li>
<li class="chapter" data-level="10.3.2" data-path="chord-diagrams-for-visualising-bilateral-migration.html"><a href="chord-diagrams-for-visualising-bilateral-migration.html#un-international-migrant-stock-data-2020"><i class="fa fa-check"></i><b>10.3.2</b> UN international migrant stock data 2020</a></li>
<li class="chapter" data-level="10.3.3" data-path="chord-diagrams-for-visualising-bilateral-migration.html"><a href="chord-diagrams-for-visualising-bilateral-migration.html#un-international-migrant-stock-data-2020-1"><i class="fa fa-check"></i><b>10.3.3</b> UN international migrant stock data 2020</a></li>
<li class="chapter" data-level="10.3.4" data-path="chord-diagrams-for-visualising-bilateral-migration.html"><a href="chord-diagrams-for-visualising-bilateral-migration.html#un-international-migrant-stock-data-2020-2"><i class="fa fa-check"></i><b>10.3.4</b> UN international migrant stock data 2020</a></li>
<li class="chapter" data-level="10.3.5" data-path="chord-diagrams-for-visualising-bilateral-migration.html"><a href="chord-diagrams-for-visualising-bilateral-migration.html#default-chorddiagram"><i class="fa fa-check"></i><b>10.3.5</b> Default <code>chordDiagram()</code></a></li>
<li class="chapter" data-level="10.3.6" data-path="chord-diagrams-for-visualising-bilateral-migration.html"><a href="chord-diagrams-for-visualising-bilateral-migration.html#default-chorddiagram-1"><i class="fa fa-check"></i><b>10.3.6</b> Default <code>chordDiagram()</code></a></li>
<li class="chapter" data-level="10.3.7" data-path="chord-diagrams-for-visualising-bilateral-migration.html"><a href="chord-diagrams-for-visualising-bilateral-migration.html#default-chorddiagram-2"><i class="fa fa-check"></i><b>10.3.7</b> Default <code>chordDiagram()</code></a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="chord-diagrams-for-visualising-bilateral-migration.html"><a href="chord-diagrams-for-visualising-bilateral-migration.html#sectors"><i class="fa fa-check"></i><b>10.4</b> Sectors</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="chord-diagrams-for-visualising-bilateral-migration.html"><a href="chord-diagrams-for-visualising-bilateral-migration.html#sector-axis"><i class="fa fa-check"></i><b>10.4.1</b> Sector Axis</a></li>
<li class="chapter" data-level="10.4.2" data-path="chord-diagrams-for-visualising-bilateral-migration.html"><a href="chord-diagrams-for-visualising-bilateral-migration.html#sector-ordering"><i class="fa fa-check"></i><b>10.4.2</b> Sector ordering</a></li>
<li class="chapter" data-level="10.4.3" data-path="chord-diagrams-for-visualising-bilateral-migration.html"><a href="chord-diagrams-for-visualising-bilateral-migration.html#sector-ordering-1"><i class="fa fa-check"></i><b>10.4.3</b> Sector ordering</a></li>
<li class="chapter" data-level="10.4.4" data-path="chord-diagrams-for-visualising-bilateral-migration.html"><a href="chord-diagrams-for-visualising-bilateral-migration.html#orientation-and-gaps"><i class="fa fa-check"></i><b>10.4.4</b> Orientation and gaps</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="chord-diagrams-for-visualising-bilateral-migration.html"><a href="chord-diagrams-for-visualising-bilateral-migration.html#colour"><i class="fa fa-check"></i><b>10.5</b> Colour</a>
<ul>
<li class="chapter" data-level="10.5.1" data-path="chord-diagrams-for-visualising-bilateral-migration.html"><a href="chord-diagrams-for-visualising-bilateral-migration.html#sector-colours"><i class="fa fa-check"></i><b>10.5.1</b> Sector colours</a></li>
<li class="chapter" data-level="10.5.2" data-path="chord-diagrams-for-visualising-bilateral-migration.html"><a href="chord-diagrams-for-visualising-bilateral-migration.html#sector-colour"><i class="fa fa-check"></i><b>10.5.2</b> Sector colour</a></li>
<li class="chapter" data-level="10.5.3" data-path="chord-diagrams-for-visualising-bilateral-migration.html"><a href="chord-diagrams-for-visualising-bilateral-migration.html#chord-colours"><i class="fa fa-check"></i><b>10.5.3</b> Chord colours</a></li>
<li class="chapter" data-level="10.5.4" data-path="chord-diagrams-for-visualising-bilateral-migration.html"><a href="chord-diagrams-for-visualising-bilateral-migration.html#chord-colours-1"><i class="fa fa-check"></i><b>10.5.4</b> Chord colours</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="chord-diagrams-for-visualising-bilateral-migration.html"><a href="chord-diagrams-for-visualising-bilateral-migration.html#chords"><i class="fa fa-check"></i><b>10.6</b> Chords</a>
<ul>
<li class="chapter" data-level="10.6.1" data-path="chord-diagrams-for-visualising-bilateral-migration.html"><a href="chord-diagrams-for-visualising-bilateral-migration.html#direction"><i class="fa fa-check"></i><b>10.6.1</b> Direction</a></li>
</ul></li>
<li class="chapter" data-level="10.7" data-path="chord-diagrams-for-visualising-bilateral-migration.html"><a href="chord-diagrams-for-visualising-bilateral-migration.html#direction-1"><i class="fa fa-check"></i><b>10.7</b> Direction</a>
<ul>
<li class="chapter" data-level="10.7.1" data-path="chord-diagrams-for-visualising-bilateral-migration.html"><a href="chord-diagrams-for-visualising-bilateral-migration.html#direction-2"><i class="fa fa-check"></i><b>10.7.1</b> Direction</a></li>
<li class="chapter" data-level="10.7.2" data-path="chord-diagrams-for-visualising-bilateral-migration.html"><a href="chord-diagrams-for-visualising-bilateral-migration.html#chord-ordering"><i class="fa fa-check"></i><b>10.7.2</b> Chord ordering</a></li>
</ul></li>
<li class="chapter" data-level="10.8" data-path="chord-diagrams-for-visualising-bilateral-migration.html"><a href="chord-diagrams-for-visualising-bilateral-migration.html#labels"><i class="fa fa-check"></i><b>10.8</b> Labels</a>
<ul>
<li class="chapter" data-level="10.8.1" data-path="chord-diagrams-for-visualising-bilateral-migration.html"><a href="chord-diagrams-for-visualising-bilateral-migration.html#labels-1"><i class="fa fa-check"></i><b>10.8.1</b> Labels</a></li>
<li class="chapter" data-level="10.8.2" data-path="chord-diagrams-for-visualising-bilateral-migration.html"><a href="chord-diagrams-for-visualising-bilateral-migration.html#labels-2"><i class="fa fa-check"></i><b>10.8.2</b> Labels</a></li>
<li class="chapter" data-level="10.8.3" data-path="chord-diagrams-for-visualising-bilateral-migration.html"><a href="chord-diagrams-for-visualising-bilateral-migration.html#labels-3"><i class="fa fa-check"></i><b>10.8.3</b> Labels</a></li>
<li class="chapter" data-level="10.8.4" data-path="chord-diagrams-for-visualising-bilateral-migration.html"><a href="chord-diagrams-for-visualising-bilateral-migration.html#labels-4"><i class="fa fa-check"></i><b>10.8.4</b> Labels</a></li>
<li class="chapter" data-level="10.8.5" data-path="chord-diagrams-for-visualising-bilateral-migration.html"><a href="chord-diagrams-for-visualising-bilateral-migration.html#labels-5"><i class="fa fa-check"></i><b>10.8.5</b> Labels</a></li>
<li class="chapter" data-level="10.8.6" data-path="chord-diagrams-for-visualising-bilateral-migration.html"><a href="chord-diagrams-for-visualising-bilateral-migration.html#saving"><i class="fa fa-check"></i><b>10.8.6</b> Saving</a></li>
<li class="chapter" data-level="10.8.7" data-path="chord-diagrams-for-visualising-bilateral-migration.html"><a href="chord-diagrams-for-visualising-bilateral-migration.html#saving-1"><i class="fa fa-check"></i><b>10.8.7</b> Saving</a></li>
<li class="chapter" data-level="10.8.8" data-path="chord-diagrams-for-visualising-bilateral-migration.html"><a href="chord-diagrams-for-visualising-bilateral-migration.html#exercise-ex8.r"><i class="fa fa-check"></i><b>10.8.8</b> Exercise (ex8.R)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="sankey-plots-for-visualising-bilateral-migration.html"><a href="sankey-plots-for-visualising-bilateral-migration.html"><i class="fa fa-check"></i><b>11</b> Sankey Plots for Visualising Bilateral Migration</a>
<ul>
<li class="chapter" data-level="11.1" data-path="sankey-plots-for-visualising-bilateral-migration.html"><a href="sankey-plots-for-visualising-bilateral-migration.html#background-4"><i class="fa fa-check"></i><b>11.1</b> Background</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="sankey-plots-for-visualising-bilateral-migration.html"><a href="sankey-plots-for-visualising-bilateral-migration.html#background-5"><i class="fa fa-check"></i><b>11.1.1</b> Background</a></li>
<li class="chapter" data-level="11.1.2" data-path="sankey-plots-for-visualising-bilateral-migration.html"><a href="sankey-plots-for-visualising-bilateral-migration.html#men-in-napoleons-1812-russian-campaign"><i class="fa fa-check"></i><b>11.1.2</b> Men in Napoleons 1812 Russian Campaign</a></li>
<li class="chapter" data-level="11.1.3" data-path="sankey-plots-for-visualising-bilateral-migration.html"><a href="sankey-plots-for-visualising-bilateral-migration.html#sankey-plot-of-migration-in-nature-by-butler2017"><i class="fa fa-check"></i><b>11.1.3</b> Sankey plot of migration in Nature by <span class="citation"><span>Butler</span> (<span>2017</span>)</span></a></li>
<li class="chapter" data-level="11.1.4" data-path="sankey-plots-for-visualising-bilateral-migration.html"><a href="sankey-plots-for-visualising-bilateral-migration.html#sankey-plots-in-r"><i class="fa fa-check"></i><b>11.1.4</b> Sankey plots in R</a></li>
<li class="chapter" data-level="11.1.5" data-path="sankey-plots-for-visualising-bilateral-migration.html"><a href="sankey-plots-for-visualising-bilateral-migration.html#sankey-plots-in-r-1"><i class="fa fa-check"></i><b>11.1.5</b> Sankey plots in R</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="sankey-plots-for-visualising-bilateral-migration.html"><a href="sankey-plots-for-visualising-bilateral-migration.html#data-format"><i class="fa fa-check"></i><b>11.2</b> Data Format</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="sankey-plots-for-visualising-bilateral-migration.html"><a href="sankey-plots-for-visualising-bilateral-migration.html#un-international-migrant-stock-data-2020-3"><i class="fa fa-check"></i><b>11.2.1</b> UN international migrant stock data 2020</a></li>
<li class="chapter" data-level="11.2.2" data-path="sankey-plots-for-visualising-bilateral-migration.html"><a href="sankey-plots-for-visualising-bilateral-migration.html#un-international-migrant-stock-data-2020-4"><i class="fa fa-check"></i><b>11.2.2</b> UN international migrant stock data 2020</a></li>
<li class="chapter" data-level="11.2.3" data-path="sankey-plots-for-visualising-bilateral-migration.html"><a href="sankey-plots-for-visualising-bilateral-migration.html#data-format-1"><i class="fa fa-check"></i><b>11.2.3</b> Data format</a></li>
<li class="chapter" data-level="11.2.4" data-path="sankey-plots-for-visualising-bilateral-migration.html"><a href="sankey-plots-for-visualising-bilateral-migration.html#data-format-2"><i class="fa fa-check"></i><b>11.2.4</b> Data format</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="sankey-plots-for-visualising-bilateral-migration.html"><a href="sankey-plots-for-visualising-bilateral-migration.html#parrellel-sets"><i class="fa fa-check"></i><b>11.3</b> Parrellel Sets</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="sankey-plots-for-visualising-bilateral-migration.html"><a href="sankey-plots-for-visualising-bilateral-migration.html#default-plot"><i class="fa fa-check"></i><b>11.3.1</b> Default Plot</a></li>
<li class="chapter" data-level="11.3.2" data-path="sankey-plots-for-visualising-bilateral-migration.html"><a href="sankey-plots-for-visualising-bilateral-migration.html#default-plot-1"><i class="fa fa-check"></i><b>11.3.2</b> Default Plot</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="sankey-plots-for-visualising-bilateral-migration.html"><a href="sankey-plots-for-visualising-bilateral-migration.html#set-axes"><i class="fa fa-check"></i><b>11.4</b> Set Axes</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="sankey-plots-for-visualising-bilateral-migration.html"><a href="sankey-plots-for-visualising-bilateral-migration.html#set-axes-1"><i class="fa fa-check"></i><b>11.4.1</b> Set Axes</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="sankey-plots-for-visualising-bilateral-migration.html"><a href="sankey-plots-for-visualising-bilateral-migration.html#colour-1"><i class="fa fa-check"></i><b>11.5</b> Colour</a>
<ul>
<li class="chapter" data-level="11.5.1" data-path="sankey-plots-for-visualising-bilateral-migration.html"><a href="sankey-plots-for-visualising-bilateral-migration.html#colour-2"><i class="fa fa-check"></i><b>11.5.1</b> Colour</a></li>
<li class="chapter" data-level="11.5.2" data-path="sankey-plots-for-visualising-bilateral-migration.html"><a href="sankey-plots-for-visualising-bilateral-migration.html#ribbon-colour---failed-axis-colour"><i class="fa fa-check"></i><b>11.5.2</b> Ribbon colour - failed axis colour</a></li>
<li class="chapter" data-level="11.5.3" data-path="sankey-plots-for-visualising-bilateral-migration.html"><a href="sankey-plots-for-visualising-bilateral-migration.html#ribbon-transparency"><i class="fa fa-check"></i><b>11.5.3</b> Ribbon transparency</a></li>
<li class="chapter" data-level="11.5.4" data-path="sankey-plots-for-visualising-bilateral-migration.html"><a href="sankey-plots-for-visualising-bilateral-migration.html#axis-colour"><i class="fa fa-check"></i><b>11.5.4</b> Axis colour</a></li>
<li class="chapter" data-level="11.5.5" data-path="sankey-plots-for-visualising-bilateral-migration.html"><a href="sankey-plots-for-visualising-bilateral-migration.html#axis-colour-1"><i class="fa fa-check"></i><b>11.5.5</b> Axis colour</a></li>
</ul></li>
<li class="chapter" data-level="11.6" data-path="sankey-plots-for-visualising-bilateral-migration.html"><a href="sankey-plots-for-visualising-bilateral-migration.html#labels-6"><i class="fa fa-check"></i><b>11.6</b> Labels</a>
<ul>
<li class="chapter" data-level="11.6.1" data-path="sankey-plots-for-visualising-bilateral-migration.html"><a href="sankey-plots-for-visualising-bilateral-migration.html#labels-7"><i class="fa fa-check"></i><b>11.6.1</b> Labels</a></li>
<li class="chapter" data-level="11.6.2" data-path="sankey-plots-for-visualising-bilateral-migration.html"><a href="sankey-plots-for-visualising-bilateral-migration.html#labels-8"><i class="fa fa-check"></i><b>11.6.2</b> Labels</a></li>
<li class="chapter" data-level="11.6.3" data-path="sankey-plots-for-visualising-bilateral-migration.html"><a href="sankey-plots-for-visualising-bilateral-migration.html#labels-9"><i class="fa fa-check"></i><b>11.6.3</b> Labels</a></li>
<li class="chapter" data-level="11.6.4" data-path="sankey-plots-for-visualising-bilateral-migration.html"><a href="sankey-plots-for-visualising-bilateral-migration.html#labels-10"><i class="fa fa-check"></i><b>11.6.4</b> Labels</a></li>
<li class="chapter" data-level="11.6.5" data-path="sankey-plots-for-visualising-bilateral-migration.html"><a href="sankey-plots-for-visualising-bilateral-migration.html#labels-11"><i class="fa fa-check"></i><b>11.6.5</b> Labels</a></li>
</ul></li>
<li class="chapter" data-level="11.7" data-path="sankey-plots-for-visualising-bilateral-migration.html"><a href="sankey-plots-for-visualising-bilateral-migration.html#spacing"><i class="fa fa-check"></i><b>11.7</b> Spacing</a>
<ul>
<li class="chapter" data-level="11.7.1" data-path="sankey-plots-for-visualising-bilateral-migration.html"><a href="sankey-plots-for-visualising-bilateral-migration.html#spacing-1"><i class="fa fa-check"></i><b>11.7.1</b> Spacing</a></li>
<li class="chapter" data-level="11.7.2" data-path="sankey-plots-for-visualising-bilateral-migration.html"><a href="sankey-plots-for-visualising-bilateral-migration.html#exercise-ex9.r"><i class="fa fa-check"></i><b>11.7.2</b> Exercise (ex9.R)</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Tools for Estimating, Measuring and Working with Migration Data in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="chord-diagrams-for-visualising-bilateral-migration" class="section level1" number="10">
<h1><span class="header-section-number">Chapter 10</span> Chord Diagrams for Visualising Bilateral Migration</h1>
<div id="section-1" class="section level2" number="10.1">
<h2><span class="header-section-number">10.1</span> .</h2>
<div id="background-3" class="section level3" number="10.1.1">
<h3><span class="header-section-number">10.1.1</span> Background</h3>
<ul>
<li>Visualizing bilateral migration is not straightforward
<ul>
<li>Difficult to represent the geographic and temporal aspect at the same time</li>
</ul></li>
<li>Many different approaches
<ul>
<li>Difficult to satisfy everyones tastes</li>
</ul></li>
<li>In this class will illustrate two non-map based approaches
<ul>
<li>Chord Diagrams</li>
<li>Alluvial or Sankey Plots</li>
</ul></li>
<li>Non-map based approaches
<ul>
<li>Provide clearer visual guide for geographically small areas that can be overwhelmed on a map</li>
<li>Include more bilateral connections</li>
</ul></li>
</ul>
</div>
<div id="map-based---the-emigrants-of-the-world-minard-1858." class="section level3" number="10.1.2">
<h3><span class="header-section-number">10.1.2</span> Map Based - The Emigrants of the World, Minard 1858.</h3>
<p><img src="img/minard.png" width="100%" /></p>
</div>
<div id="flowline-maps" class="section level3" number="10.1.3">
<h3><span class="header-section-number">10.1.3</span> Flowline Maps</h3>
<p><img src="img/lambert.png" width="100%" /></p>
</div>
<div id="criticised-new-york-times-refugee-flow-map" class="section level3" number="10.1.4">
<h3><span class="header-section-number">10.1.4</span> Criticised New York Times refugee flow map</h3>
<p><img src="img/refugee_flow_map-africa.jpg" width="100%" /></p>
</div>
<div id="martin-grandjeans-attempt-to-rectify" class="section level3" number="10.1.5">
<h3><span class="header-section-number">10.1.5</span> Martin Grandjeans attempt to rectify</h3>
<p><img src="img/Refugees-world-930x523.png" width="100%" /></p>
</div>
</div>
<div id="chord-diagram" class="section level2" number="10.2">
<h2><span class="header-section-number">10.2</span> Chord Diagram</h2>
<div id="chord-diagrams" class="section level3" number="10.2.1">
<h3><span class="header-section-number">10.2.1</span> Chord Diagrams</h3>
<ul>
<li>First chord diagrams introduced by Martin Krzywinski in 2007.
<ul>
<li><code>https://www.nytimes.com/imagepages/2007/01/22/science/20070123_SCI_ILLO.html</code></li>
</ul></li>
<li>Used to facilitate the identification and analysis of similarities and differences arising from comparisons of genomes</li>
<li>Displays relationships between pairs of positions by the use of ribbons, which encode the position, size, and orientation of related genomic elements</li>
<li>Developed into Circos software in Perl by <span class="citation"><a href="#ref-Krzywinski2009" role="doc-biblioref">Krzywinski et al.</a> (<a href="#ref-Krzywinski2009" role="doc-biblioref">2009</a>)</span>
<ul>
<li><code>http://circos.ca/</code></li>
</ul></li>
</ul>
</div>
<div id="new-york-times-2007" class="section level3" number="10.2.2">
<h3><span class="header-section-number">10.2.2</span> New York Times 2007</h3>
<p><img src="img/nyt.jpg" width="100%" /></p>
</div>
<div id="chord-diagrams-with-migration-data" class="section level3" number="10.2.3">
<h3><span class="header-section-number">10.2.3</span> Chord Diagrams with Migration Data</h3>
<ul>
<li>Interactive chord diagram plots introduced into rr.js library by Bostock</li>
<li>First used to illustrate migration patterns by data journalist Chris Walker in 2013
<ul>
<li>Mapping Americas Restless Interstate Migration Without a Map <code>https://www.wired.com/2013/11/mapping-migration-without-a-map/</code></li>
</ul></li>
<li>Does not show the direction of move until mouse-over.</li>
<li>Nikola Sander adapted Circos software to add directional indicators for flows
<ul>
<li>First used in <span class="citation"><a href="#ref-Abel2014" role="doc-biblioref">Abel and Sander</a> (<a href="#ref-Abel2014" role="doc-biblioref">2014</a>)</span>. <em>Quantifying Global International Migration Flows</em>. Science, 343 (6178).</li>
<li>Interactive version at <code>http://download.gsb.bund.de/BIB/global_flow/</code></li>
</ul></li>
</ul>
</div>
<div id="chord-diagrams-with-migration-data-1" class="section level3" number="10.2.4">
<h3><span class="header-section-number">10.2.4</span> Chord Diagrams with Migration Data</h3>
<p><img src="img/walker.jpg" width="100%" /></p>
</div>
<div id="chord-diagrams-with-migration-data-2" class="section level3" number="10.2.5">
<h3><span class="header-section-number">10.2.5</span> Chord Diagrams with Migration Data</h3>
<p><img src="img/sander.jpg" width="100%" /></p>
</div>
</div>
<div id="circlize" class="section level2" number="10.3">
<h2><span class="header-section-number">10.3</span> circlize</h2>
<div id="chord-diagrams-in-r" class="section level3" number="10.3.1">
<h3><span class="header-section-number">10.3.1</span> Chord Diagrams in R</h3>
<ul>
<li>Some drawbacks to the Circos based plots
<ul>
<li>Inflows plotted first on each sector</li>
<li>Chords for smaller flows overlap larger flows</li>
<li>Hides smallest flows</li>
<li>Not easy to detect direction of flows</li>
<li>Addition of direction arrows usually require some further touch using a second piece of software, e.g.Photoshop or Illustrator
<ul>
<li>Problematic for replicability</li>
</ul></li>
</ul></li>
<li>In recent years a number of R packages that implement similar plots as the Circos software have appeared on CRAN</li>
<li>The <em>circlize</em> R package by <span class="citation"><a href="#ref-Gu2014" role="doc-biblioref">Gu et al.</a> (<a href="#ref-Gu2014" role="doc-biblioref">2014</a>)</span> is perhaps the most complete and accessible for non-genomic data
<ul>
<li>Built on base R graphics package</li>
</ul></li>
<li>Includes a <code>chordDiagram()</code> function
<ul>
<li>Extensive documentation of the <code>chordDiagram()</code> function in <a href="https://jokergoo.github.io/circlize_book/book/the-chorddiagram-function.html">Chapters 13-15</a> of the circlize book.</li>
</ul></li>
</ul>
</div>
<div id="un-international-migrant-stock-data-2020" class="section level3" number="10.3.2">
<h3><span class="header-section-number">10.3.2</span> UN international migrant stock data 2020</h3>
<div class="sourceCode" id="cb295"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb295-1"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb295-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb295-2"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb295-2" aria-hidden="true" tabindex="-1"></a>un <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">&quot;data/un_desa_ims_tidy.csv&quot;</span>)</span>
<span id="cb295-3"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb295-3" aria-hidden="true" tabindex="-1"></a>un</span></code></pre></div>
<pre><code>## # A tibble: 259,357 x 6
##     year     stock por_name por_code pob_name           pob_code
##    &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;                 &lt;dbl&gt;
##  1  1990 152986157 WORLD         900 WORLD                   900
##  2  1995 161289976 WORLD         900 WORLD                   900
##  3  2000 173230585 WORLD         900 WORLD                   900
##  4  2005 191446828 WORLD         900 WORLD                   900
##  5  2010 220983187 WORLD         900 WORLD                   900
##  6  2015 247958644 WORLD         900 WORLD                   900
##  7  2020 280598105 WORLD         900 WORLD                   900
##  8  1990  15334807 WORLD         900 Sub-Saharan Africa      947
##  9  1995  16488973 WORLD         900 Sub-Saharan Africa      947
## 10  2000  15638014 WORLD         900 Sub-Saharan Africa      947
## # ... with 259,347 more rows</code></pre>
</div>
<div id="un-international-migrant-stock-data-2020-1" class="section level3" number="10.3.3">
<h3><span class="header-section-number">10.3.3</span> UN international migrant stock data 2020</h3>
<ul>
<li>Use continent to continent flows in 2020</li>
</ul>
<div class="sourceCode" id="cb297"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb297-1"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb297-1" aria-hidden="true" tabindex="-1"></a><span class="co"># codes for contents</span></span>
<span id="cb297-2"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb297-2" aria-hidden="true" tabindex="-1"></a>cc <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">903</span>, <span class="dv">935</span>, <span class="dv">908</span>, <span class="dv">904</span>, <span class="dv">905</span>, <span class="dv">909</span>)</span>
<span id="cb297-3"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb297-3" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> un <span class="sc">%&gt;%</span></span>
<span id="cb297-4"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb297-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(por_code <span class="sc">%in%</span> cc, </span>
<span id="cb297-5"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb297-5" aria-hidden="true" tabindex="-1"></a>         pob_code <span class="sc">%in%</span> cc,</span>
<span id="cb297-6"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb297-6" aria-hidden="true" tabindex="-1"></a>         year <span class="sc">==</span> <span class="dv">2020</span>)</span>
<span id="cb297-7"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb297-7" aria-hidden="true" tabindex="-1"></a>d</span></code></pre></div>
<pre><code>## # A tibble: 36 x 6
##     year    stock por_name por_code pob_name                        pob_code
##    &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;                              &lt;dbl&gt;
##  1  2020 20917565 AFRICA        903 AFRICA                               903
##  2  2020  1207631 AFRICA        903 ASIA                                 935
##  3  2020   648455 AFRICA        903 EUROPE                               908
##  4  2020    32524 AFRICA        903 LATIN AMERICA AND THE CARIBBEAN      904
##  5  2020    53563 AFRICA        903 NORTHERN AMERICA                     905
##  6  2020    14483 AFRICA        903 OCEANIA                              909
##  7  2020  4720103 ASIA          935 AFRICA                               903
##  8  2020 68497762 ASIA          935 ASIA                                 935
##  9  2020  7169630 ASIA          935 EUROPE                               908
## 10  2020   414658 ASIA          935 LATIN AMERICA AND THE CARIBBEAN      904
## # ... with 26 more rows</code></pre>
</div>
<div id="un-international-migrant-stock-data-2020-2" class="section level3" number="10.3.4">
<h3><span class="header-section-number">10.3.4</span> UN international migrant stock data 2020</h3>
<ul>
<li>Remove within continent stocks (will dominate the plot) and focus on inter-continent migrants</li>
</ul>
<div class="sourceCode" id="cb299"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb299-1"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb299-1" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span></span>
<span id="cb299-2"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb299-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">orig =</span> pob_name,</span>
<span id="cb299-3"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb299-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">dest =</span> por_name) <span class="sc">%&gt;%</span></span>
<span id="cb299-4"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb299-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(orig <span class="sc">!=</span> dest) <span class="sc">%&gt;%</span></span>
<span id="cb299-5"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb299-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">contains</span>(<span class="st">&quot;code&quot;</span>))</span>
<span id="cb299-6"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb299-6" aria-hidden="true" tabindex="-1"></a>d</span></code></pre></div>
<pre><code>## # A tibble: 30 x 4
##     year   stock dest   orig                           
##    &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;                          
##  1  2020 1207631 AFRICA ASIA                           
##  2  2020  648455 AFRICA EUROPE                         
##  3  2020   32524 AFRICA LATIN AMERICA AND THE CARIBBEAN
##  4  2020   53563 AFRICA NORTHERN AMERICA               
##  5  2020   14483 AFRICA OCEANIA                        
##  6  2020 4720103 ASIA   AFRICA                         
##  7  2020 7169630 ASIA   EUROPE                         
##  8  2020  414658 ASIA   LATIN AMERICA AND THE CARIBBEAN
##  9  2020  538199 ASIA   NORTHERN AMERICA               
## 10  2020  101725 ASIA   OCEANIA                        
## # ... with 20 more rows</code></pre>
</div>
<div id="default-chorddiagram" class="section level3" number="10.3.5">
<h3><span class="header-section-number">10.3.5</span> Default <code>chordDiagram()</code></h3>
<ul>
<li>The <code>chordDiagram()</code> function can take either a <code>matrix</code> or <code>data.frame</code> object as first argument <code>x</code> for the data.</li>
<li>I prefer the latter as they are much easier to create and manipulate (using <em>dplyr</em> and other <em>tidyverse</em> packages).
<ul>
<li>When using a <code>data.frame</code>, the first three columns should correspond to the origin, destination and size of connection.</li>
<li>Columns can take any name, but must be in that order.</li>
<li>Will also work with <code>tbl_df</code> (tibble)</li>
</ul></li>
<li>Many options in <code>chordDiagram()</code>, that by default are not ideal for displaying migration data</li>
</ul>
<div class="sourceCode" id="cb301"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb301-1"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb301-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(circlize)</span>
<span id="cb301-2"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb301-2" aria-hidden="true" tabindex="-1"></a><span class="co"># first three columns not origin, destination, connection (in that order)</span></span>
<span id="cb301-3"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb301-3" aria-hidden="true" tabindex="-1"></a><span class="fu">chordDiagram</span>(<span class="at">x =</span> d)</span></code></pre></div>
<p><img src="_main_files/figure-html/cd-default-1.png" width="672" /></p>
</div>
<div id="default-chorddiagram-1" class="section level3" number="10.3.6">
<h3><span class="header-section-number">10.3.6</span> Default <code>chordDiagram()</code></h3>
<ul>
<li>Move the <code>orig</code>, <code>dest</code> and <code>stock</code> columns to the left of the data frame using the <code>relocate()</code> function in the <em>dplyr</em> package</li>
</ul>
<div class="sourceCode" id="cb302"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb302-1"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb302-1" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">relocate</span>(d, orig, dest, stock)</span>
<span id="cb302-2"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb302-2" aria-hidden="true" tabindex="-1"></a>d</span></code></pre></div>
<pre><code>## # A tibble: 30 x 4
##    orig                            dest     stock  year
##    &lt;chr&gt;                           &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt;
##  1 ASIA                            AFRICA 1207631  2020
##  2 EUROPE                          AFRICA  648455  2020
##  3 LATIN AMERICA AND THE CARIBBEAN AFRICA   32524  2020
##  4 NORTHERN AMERICA                AFRICA   53563  2020
##  5 OCEANIA                         AFRICA   14483  2020
##  6 AFRICA                          ASIA   4720103  2020
##  7 EUROPE                          ASIA   7169630  2020
##  8 LATIN AMERICA AND THE CARIBBEAN ASIA    414658  2020
##  9 NORTHERN AMERICA                ASIA    538199  2020
## 10 OCEANIA                         ASIA    101725  2020
## # ... with 20 more rows</code></pre>
<div class="sourceCode" id="cb304"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb304-1"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb304-1" aria-hidden="true" tabindex="-1"></a><span class="fu">chordDiagram</span>(<span class="at">x =</span> d)</span></code></pre></div>
<pre><code>## There are more than one numeric columns in the data frame. Take the
## first two numeric columns and draw the link ends with unequal width.
## 
## Type `circos.par$message = FALSE` to suppress the message.</code></pre>
<p><img src="_main_files/figure-html/cd-col-order-1.png" width="672" /></p>
</div>
<div id="default-chorddiagram-2" class="section level3" number="10.3.7">
<h3><span class="header-section-number">10.3.7</span> Default <code>chordDiagram()</code></h3>
<ul>
<li>Avoid chord link ends with unequal widths at each base by using only one numeric column in <code>d</code></li>
</ul>
<div class="sourceCode" id="cb306"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb306-1"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb306-1" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">select</span>(d, orig, dest, stock)</span>
<span id="cb306-2"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb306-2" aria-hidden="true" tabindex="-1"></a>d</span></code></pre></div>
<pre><code>## # A tibble: 30 x 3
##    orig                            dest     stock
##    &lt;chr&gt;                           &lt;chr&gt;    &lt;dbl&gt;
##  1 ASIA                            AFRICA 1207631
##  2 EUROPE                          AFRICA  648455
##  3 LATIN AMERICA AND THE CARIBBEAN AFRICA   32524
##  4 NORTHERN AMERICA                AFRICA   53563
##  5 OCEANIA                         AFRICA   14483
##  6 AFRICA                          ASIA   4720103
##  7 EUROPE                          ASIA   7169630
##  8 LATIN AMERICA AND THE CARIBBEAN ASIA    414658
##  9 NORTHERN AMERICA                ASIA    538199
## 10 OCEANIA                         ASIA    101725
## # ... with 20 more rows</code></pre>
<div class="sourceCode" id="cb308"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb308-1"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb308-1" aria-hidden="true" tabindex="-1"></a><span class="fu">chordDiagram</span>(<span class="at">x =</span> d)</span></code></pre></div>
<p><img src="_main_files/figure-html/cd-column3-1.png" width="672" /></p>
</div>
</div>
<div id="sectors" class="section level2" number="10.4">
<h2><span class="header-section-number">10.4</span> Sectors</h2>
<div id="sector-axis" class="section level3" number="10.4.1">
<h3><span class="header-section-number">10.4.1</span> Sector Axis</h3>
<ul>
<li>Edit the bilateral counts to a sensible scale to ensure the axis labels are legible.</li>
</ul>
<div class="sourceCode" id="cb309"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb309-1"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb309-1" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">mutate</span>(d, <span class="at">stock =</span> stock<span class="sc">/</span><span class="fl">1e6</span>)</span>
<span id="cb309-2"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb309-2" aria-hidden="true" tabindex="-1"></a>d</span></code></pre></div>
<pre><code>## # A tibble: 30 x 3
##    orig                            dest    stock
##    &lt;chr&gt;                           &lt;chr&gt;   &lt;dbl&gt;
##  1 ASIA                            AFRICA 1.21  
##  2 EUROPE                          AFRICA 0.648 
##  3 LATIN AMERICA AND THE CARIBBEAN AFRICA 0.0325
##  4 NORTHERN AMERICA                AFRICA 0.0536
##  5 OCEANIA                         AFRICA 0.0145
##  6 AFRICA                          ASIA   4.72  
##  7 EUROPE                          ASIA   7.17  
##  8 LATIN AMERICA AND THE CARIBBEAN ASIA   0.415 
##  9 NORTHERN AMERICA                ASIA   0.538 
## 10 OCEANIA                         ASIA   0.102 
## # ... with 20 more rows</code></pre>
<div class="sourceCode" id="cb311"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb311-1"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb311-1" aria-hidden="true" tabindex="-1"></a><span class="fu">chordDiagram</span>(<span class="at">x =</span> d)</span></code></pre></div>
<p><img src="_main_files/figure-html/cd-axis-1.png" width="672" /></p>
</div>
<div id="sector-ordering" class="section level3" number="10.4.2">
<h3><span class="header-section-number">10.4.2</span> Sector ordering</h3>
<ul>
<li>Sector ordering is alphabetical by default</li>
<li>Can specify order using <code>order</code> argument and pass a vector</li>
<li>Try to order so that neighboring regions are next each other</li>
</ul>
<div class="sourceCode" id="cb312"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb312-1"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb312-1" aria-hidden="true" tabindex="-1"></a>r <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">reg =</span> <span class="fu">union</span>(d<span class="sc">$</span>orig, d<span class="sc">$</span>dest))</span>
<span id="cb312-2"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb312-2" aria-hidden="true" tabindex="-1"></a>r</span></code></pre></div>
<pre><code>## # A tibble: 6 x 1
##   reg                            
##   &lt;chr&gt;                          
## 1 ASIA                           
## 2 EUROPE                         
## 3 LATIN AMERICA AND THE CARIBBEAN
## 4 NORTHERN AMERICA               
## 5 OCEANIA                        
## 6 AFRICA</code></pre>
</div>
<div id="sector-ordering-1" class="section level3" number="10.4.3">
<h3><span class="header-section-number">10.4.3</span> Sector ordering</h3>
<div class="sourceCode" id="cb314"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb314-1"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb314-1" aria-hidden="true" tabindex="-1"></a>r <span class="ot">&lt;-</span> r <span class="sc">%&gt;%</span></span>
<span id="cb314-2"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb314-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">reg_order =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">6</span>, <span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">2</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb314-3"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb314-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(reg_order)</span>
<span id="cb314-4"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb314-4" aria-hidden="true" tabindex="-1"></a>r</span></code></pre></div>
<pre><code>## # A tibble: 6 x 2
##   reg                             reg_order
##   &lt;chr&gt;                               &lt;dbl&gt;
## 1 NORTHERN AMERICA                        1
## 2 AFRICA                                  2
## 3 EUROPE                                  3
## 4 ASIA                                    4
## 5 OCEANIA                                 5
## 6 LATIN AMERICA AND THE CARIBBEAN         6</code></pre>
<div class="sourceCode" id="cb316"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb316-1"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb316-1" aria-hidden="true" tabindex="-1"></a><span class="co"># order sectors</span></span>
<span id="cb316-2"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb316-2" aria-hidden="true" tabindex="-1"></a><span class="fu">chordDiagram</span>(<span class="at">x =</span> d, <span class="at">order =</span> r<span class="sc">$</span>reg)</span></code></pre></div>
<p><img src="_main_files/figure-html/cd-sector-1.png" width="672" /></p>
</div>
<div id="orientation-and-gaps" class="section level3" number="10.4.4">
<h3><span class="header-section-number">10.4.4</span> Orientation and gaps</h3>
<ul>
<li>The <code>circos.par()</code> function controls the overall layout parameters of the graphic display</li>
<li>Use <code>circos.par()</code> to set
<ul>
<li><code>gap.degree</code> the degree of gaps between sectors are set - default <code>gap.degree = 1</code></li>
<li><code>start.degree</code> the degree from three oclock where the first sector appears - default <code>start.degree = 0</code></li>
</ul></li>
<li>Anything set via <code>circos.par()</code> will be fixed for all remaining pots</li>
<li>Reset to default graphic parameters using <code>circos.clear()</code> or overwrite with new <code>circos.par()</code></li>
</ul>
<div class="sourceCode" id="cb317"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb317-1"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb317-1" aria-hidden="true" tabindex="-1"></a><span class="co"># increase gaps</span></span>
<span id="cb317-2"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb317-2" aria-hidden="true" tabindex="-1"></a><span class="fu">circos.par</span>(<span class="at">gap.degree =</span> <span class="dv">5</span>)</span>
<span id="cb317-3"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb317-3" aria-hidden="true" tabindex="-1"></a><span class="fu">chordDiagram</span>(<span class="at">x =</span> d, <span class="at">order =</span> r<span class="sc">$</span>reg)</span></code></pre></div>
<p><img src="_main_files/figure-html/cd-gap-1.png" width="672" /></p>
<div class="sourceCode" id="cb318"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb318-1"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb318-1" aria-hidden="true" tabindex="-1"></a><span class="co"># rotate</span></span>
<span id="cb318-2"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb318-2" aria-hidden="true" tabindex="-1"></a><span class="fu">circos.par</span>(<span class="at">start.degree =</span> <span class="dv">90</span>)</span>
<span id="cb318-3"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb318-3" aria-hidden="true" tabindex="-1"></a><span class="fu">chordDiagram</span>(<span class="at">x =</span> d, <span class="at">order =</span> r<span class="sc">$</span>reg)</span></code></pre></div>
<p><img src="_main_files/figure-html/cd-gap-2.png" width="672" /></p>
</div>
</div>
<div id="colour" class="section level2" number="10.5">
<h2><span class="header-section-number">10.5</span> Colour</h2>
<div id="sector-colours" class="section level3" number="10.5.1">
<h3><span class="header-section-number">10.5.1</span> Sector colours</h3>
<ul>
<li>Colours are randomly generated (will change every time you plot)</li>
<li>Can set to a choice using either:
<ul>
<li><code>grid.col</code> corresponding to sectors (regions/countries/areas)</li>
<li><code>transparency</code> set by default to 0.5</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb319"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb319-1"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb319-1" aria-hidden="true" tabindex="-1"></a>r <span class="ot">&lt;-</span> r <span class="sc">%&gt;%</span></span>
<span id="cb319-2"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb319-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">col1 =</span> <span class="fu">c</span>(<span class="st">&quot;black&quot;</span>, <span class="st">&quot;gold&quot;</span>, <span class="st">&quot;orange&quot;</span>, <span class="st">&quot;blue&quot;</span>, <span class="st">&quot;purple&quot;</span>, <span class="st">&quot;red&quot;</span>))</span>
<span id="cb319-3"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb319-3" aria-hidden="true" tabindex="-1"></a>r</span></code></pre></div>
<pre><code>## # A tibble: 6 x 3
##   reg                             reg_order col1  
##   &lt;chr&gt;                               &lt;dbl&gt; &lt;chr&gt; 
## 1 NORTHERN AMERICA                        1 black 
## 2 AFRICA                                  2 gold  
## 3 EUROPE                                  3 orange
## 4 ASIA                                    4 blue  
## 5 OCEANIA                                 5 purple
## 6 LATIN AMERICA AND THE CARIBBEAN         6 red</code></pre>
<div class="sourceCode" id="cb321"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb321-1"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb321-1" aria-hidden="true" tabindex="-1"></a><span class="fu">chordDiagram</span>(<span class="at">x =</span> d, <span class="at">order =</span> r<span class="sc">$</span>reg, <span class="at">grid.col =</span> r<span class="sc">$</span>col1)</span></code></pre></div>
<p><img src="_main_files/figure-html/cd-col1-1.png" width="672" /></p>
</div>
<div id="sector-colour" class="section level3" number="10.5.2">
<h3><span class="header-section-number">10.5.2</span> Sector colour</h3>
<ul>
<li>Can use the <em>RColourBrewer</em> package to generate palettes (maximum of 9 colours)
<ul>
<li>Based on <code>https://colorbrewer2.org/</code></li>
</ul></li>
</ul>
<div class="sourceCode" id="cb322"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb322-1"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb322-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RColorBrewer)</span>
<span id="cb322-2"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb322-2" aria-hidden="true" tabindex="-1"></a>r <span class="ot">&lt;-</span> r <span class="sc">%&gt;%</span></span>
<span id="cb322-3"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb322-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">col2 =</span> <span class="fu">brewer.pal</span>(<span class="at">n =</span> <span class="dv">6</span>, <span class="at">name =</span> <span class="st">&quot;Set1&quot;</span>),</span>
<span id="cb322-4"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb322-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">col3 =</span> <span class="fu">c</span>(<span class="st">&quot;Red&quot;</span>, <span class="fu">rep</span>(<span class="st">&quot;Grey&quot;</span>, <span class="at">times =</span> <span class="dv">5</span>)))</span>
<span id="cb322-5"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb322-5" aria-hidden="true" tabindex="-1"></a>r</span></code></pre></div>
<pre><code>## # A tibble: 6 x 5
##   reg                             reg_order col1   col2    col3 
##   &lt;chr&gt;                               &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;
## 1 NORTHERN AMERICA                        1 black  #E41A1C Red  
## 2 AFRICA                                  2 gold   #377EB8 Grey 
## 3 EUROPE                                  3 orange #4DAF4A Grey 
## 4 ASIA                                    4 blue   #984EA3 Grey 
## 5 OCEANIA                                 5 purple #FF7F00 Grey 
## 6 LATIN AMERICA AND THE CARIBBEAN         6 red    #FFFF33 Grey</code></pre>
<div class="sourceCode" id="cb324"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb324-1"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb324-1" aria-hidden="true" tabindex="-1"></a><span class="fu">chordDiagram</span>(<span class="at">x =</span> d, <span class="at">order =</span> r<span class="sc">$</span>reg, <span class="at">grid.col =</span> r<span class="sc">$</span>col2)</span></code></pre></div>
<p><img src="_main_files/figure-html/cd-col2-1.png" width="672" /></p>
<div class="sourceCode" id="cb325"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb325-1"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb325-1" aria-hidden="true" tabindex="-1"></a><span class="fu">chordDiagram</span>(<span class="at">x =</span> d, <span class="at">order =</span> r<span class="sc">$</span>reg, <span class="at">grid.col =</span> r<span class="sc">$</span>col2, <span class="at">transparency =</span> <span class="fl">0.25</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/cd-col2-2.png" width="672" /></p>
<div class="sourceCode" id="cb326"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb326-1"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb326-1" aria-hidden="true" tabindex="-1"></a><span class="fu">chordDiagram</span>(<span class="at">x =</span> d, <span class="at">order =</span> r<span class="sc">$</span>reg, <span class="at">grid.col =</span> r<span class="sc">$</span>col3)</span></code></pre></div>
<p><img src="_main_files/figure-html/cd-col2-3.png" width="672" /></p>
</div>
<div id="chord-colours" class="section level3" number="10.5.3">
<h3><span class="header-section-number">10.5.3</span> Chord colours</h3>
<ul>
<li>Chord colours follow the origin sector. We can specify different colours using
<ul>
<li><code>col</code> corresponding to links (bilateral migration data)</li>
<li><code>link.visible</code> will hide particular chords</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb327"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb327-1"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb327-1" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span></span>
<span id="cb327-2"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb327-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># highlight Asia to Europe flows</span></span>
<span id="cb327-3"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb327-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">link_col1 =</span> <span class="fu">ifelse</span>(<span class="at">test =</span> orig <span class="sc">==</span> <span class="st">&quot;ASIA&quot;</span> <span class="sc">&amp;</span> dest <span class="sc">==</span> <span class="st">&quot;EUROPE&quot;</span>,</span>
<span id="cb327-4"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb327-4" aria-hidden="true" tabindex="-1"></a>                            <span class="at">yes =</span> <span class="st">&quot;black&quot;</span>, <span class="at">no =</span> <span class="st">&quot;grey&quot;</span>),</span>
<span id="cb327-5"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb327-5" aria-hidden="true" tabindex="-1"></a>         <span class="co"># show only flows out or into Asia</span></span>
<span id="cb327-6"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb327-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">show_link =</span> orig <span class="sc">==</span> <span class="st">&quot;ASIA&quot;</span> <span class="sc">|</span> dest <span class="sc">==</span> <span class="st">&quot;ASIA&quot;</span>)</span>
<span id="cb327-7"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb327-7" aria-hidden="true" tabindex="-1"></a>d</span></code></pre></div>
<pre><code>## # A tibble: 30 x 5
##    orig                            dest    stock link_col1 show_link
##    &lt;chr&gt;                           &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;     &lt;lgl&gt;    
##  1 ASIA                            AFRICA 1.21   grey      TRUE     
##  2 EUROPE                          AFRICA 0.648  grey      FALSE    
##  3 LATIN AMERICA AND THE CARIBBEAN AFRICA 0.0325 grey      FALSE    
##  4 NORTHERN AMERICA                AFRICA 0.0536 grey      FALSE    
##  5 OCEANIA                         AFRICA 0.0145 grey      FALSE    
##  6 AFRICA                          ASIA   4.72   grey      TRUE     
##  7 EUROPE                          ASIA   7.17   grey      TRUE     
##  8 LATIN AMERICA AND THE CARIBBEAN ASIA   0.415  grey      TRUE     
##  9 NORTHERN AMERICA                ASIA   0.538  grey      TRUE     
## 10 OCEANIA                         ASIA   0.102  grey      TRUE     
## # ... with 20 more rows</code></pre>
</div>
<div id="chord-colours-1" class="section level3" number="10.5.4">
<h3><span class="header-section-number">10.5.4</span> Chord colours</h3>
<ul>
<li>Pass the chord specific settings to <code>chordDiagram()</code></li>
</ul>
<div class="sourceCode" id="cb329"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb329-1"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb329-1" aria-hidden="true" tabindex="-1"></a><span class="fu">chordDiagram</span>(<span class="at">x =</span> d, <span class="at">order =</span> r<span class="sc">$</span>reg,</span>
<span id="cb329-2"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb329-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">grid.col =</span> r<span class="sc">$</span>col2, <span class="at">col =</span> d<span class="sc">$</span>link_col1)</span></code></pre></div>
<p><img src="_main_files/figure-html/cd-col3-1.png" width="672" /></p>
<div class="sourceCode" id="cb330"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb330-1"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb330-1" aria-hidden="true" tabindex="-1"></a><span class="fu">chordDiagram</span>(<span class="at">x =</span> d, <span class="at">order =</span> r<span class="sc">$</span>reg,</span>
<span id="cb330-2"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb330-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">grid.col =</span> r<span class="sc">$</span>col2, <span class="at">link.visible =</span> d<span class="sc">$</span>show_link)</span></code></pre></div>
<p><img src="_main_files/figure-html/cd-col3-2.png" width="672" /></p>
</div>
</div>
<div id="chords" class="section level2" number="10.6">
<h2><span class="header-section-number">10.6</span> Chords</h2>
<div id="direction" class="section level3" number="10.6.1">
<h3><span class="header-section-number">10.6.1</span> Direction</h3>
<ul>
<li>Distinguish direction of bilateral link using
<ul>
<li>Different heights at the start and end of the chord links</li>
<li>Arrows</li>
<li>Combination of both</li>
</ul></li>
<li>Set in <code>chordDiagram()</code> using
<ul>
<li><code>directional = 1</code> (from link goes from first to second column)</li>
<li><code>direction.type</code> arguments</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb331"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb331-1"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb331-1" aria-hidden="true" tabindex="-1"></a><span class="co"># drop link_col column</span></span>
<span id="cb331-2"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb331-2" aria-hidden="true" tabindex="-1"></a>d<span class="sc">$</span>link_col1 <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb331-3"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb331-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb331-4"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb331-4" aria-hidden="true" tabindex="-1"></a><span class="co"># as used by Sander, default of direction.type = &quot;diffHeight&quot;</span></span>
<span id="cb331-5"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb331-5" aria-hidden="true" tabindex="-1"></a><span class="fu">chordDiagram</span>(<span class="at">x =</span> d, <span class="at">order =</span> r<span class="sc">$</span>reg, <span class="at">grid.col =</span> r<span class="sc">$</span>col2, <span class="at">transparency =</span> <span class="fl">0.25</span>,</span>
<span id="cb331-6"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb331-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">directional =</span> <span class="dv">1</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/cd-direction1-1.png" width="672" /></p>
<div class="sourceCode" id="cb332"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb332-1"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb332-1" aria-hidden="true" tabindex="-1"></a><span class="co"># default arrows are too much</span></span>
<span id="cb332-2"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb332-2" aria-hidden="true" tabindex="-1"></a><span class="fu">chordDiagram</span>(<span class="at">x =</span> d, <span class="at">order =</span> r<span class="sc">$</span>reg, <span class="at">grid.col =</span> r<span class="sc">$</span>col2, <span class="at">transparency =</span> <span class="fl">0.25</span>,</span>
<span id="cb332-3"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb332-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">directional =</span> <span class="dv">1</span>, <span class="at">direction.type =</span> <span class="fu">c</span>(<span class="st">&quot;diffHeight&quot;</span>, <span class="st">&quot;arrows&quot;</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/cd-direction1-2.png" width="672" /></p>
<div class="sourceCode" id="cb333"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb333-1"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb333-1" aria-hidden="true" tabindex="-1"></a><span class="co"># getting there...</span></span>
<span id="cb333-2"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb333-2" aria-hidden="true" tabindex="-1"></a><span class="fu">chordDiagram</span>(<span class="at">x =</span> d, <span class="at">order =</span> r<span class="sc">$</span>reg, <span class="at">grid.col =</span> r<span class="sc">$</span>col2, <span class="at">transparency =</span> <span class="fl">0.25</span>,</span>
<span id="cb333-3"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb333-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">directional =</span> <span class="dv">1</span>, <span class="at">direction.type =</span> <span class="fu">c</span>(<span class="st">&quot;diffHeight&quot;</span>, <span class="st">&quot;arrows&quot;</span>),</span>
<span id="cb333-4"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb333-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">link.arr.type =</span> <span class="st">&quot;big.arrow&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/cd-direction1-3.png" width="672" /></p>
</div>
</div>
<div id="direction-1" class="section level2" number="10.7">
<h2><span class="header-section-number">10.7</span> Direction</h2>
<ul>
<li>Connect the base of the link to the sector through combination of
<ul>
<li>Adjusting the difference in height between the beginning and end of chords</li>
<li>Removing padding between the axis and the grid (the inner circle where the chords are)</li>
</ul></li>
<li>Set the <code>diffHeight</code> argument to a negative number so that the start of the chord is longer than then end.
<ul>
<li>Removes the destination sector bars (chart junk IMO).</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb334"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb334-1"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb334-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extreme height difference</span></span>
<span id="cb334-2"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb334-2" aria-hidden="true" tabindex="-1"></a><span class="fu">chordDiagram</span>(<span class="at">x =</span> d, <span class="at">order =</span> r<span class="sc">$</span>reg, <span class="at">grid.col =</span> r<span class="sc">$</span>col2, <span class="at">transparency =</span> <span class="fl">0.25</span>,</span>
<span id="cb334-3"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb334-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">directional =</span> <span class="dv">1</span>, <span class="at">direction.type =</span> <span class="fu">c</span>(<span class="st">&quot;diffHeight&quot;</span>, <span class="st">&quot;arrows&quot;</span>),</span>
<span id="cb334-4"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb334-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">link.arr.type =</span> <span class="st">&quot;big.arrow&quot;</span>, <span class="at">diffHeight  =</span> <span class="sc">-</span><span class="fl">0.2</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/cd-direction2-1.png" width="672" /></p>
<div class="sourceCode" id="cb335"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb335-1"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb335-1" aria-hidden="true" tabindex="-1"></a><span class="co"># height difference looks good</span></span>
<span id="cb335-2"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb335-2" aria-hidden="true" tabindex="-1"></a><span class="fu">chordDiagram</span>(<span class="at">x =</span> d, <span class="at">order =</span> r<span class="sc">$</span>reg, <span class="at">grid.col =</span> r<span class="sc">$</span>col2, <span class="at">transparency =</span> <span class="fl">0.25</span>,</span>
<span id="cb335-3"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb335-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">directional =</span> <span class="dv">1</span>, <span class="at">direction.type =</span> <span class="fu">c</span>(<span class="st">&quot;diffHeight&quot;</span>, <span class="st">&quot;arrows&quot;</span>),</span>
<span id="cb335-4"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb335-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">link.arr.type =</span> <span class="st">&quot;big.arrow&quot;</span>, <span class="at">diffHeight  =</span> <span class="sc">-</span><span class="fl">0.05</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/cd-direction2-2.png" width="672" /></p>
<div id="direction-2" class="section level3" number="10.7.1">
<h3><span class="header-section-number">10.7.1</span> Direction</h3>
<ul>
<li>Set in the <code>track.margin</code> option of <code>circos.par()</code> to remove the padding
<ul>
<li>Default of <code>track.margin = c(0.01, 0.01)</code> for chord diagrams - one percent between label names and the axis, and one percent between the axis and the grid (the chords)</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb336"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb336-1"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb336-1" aria-hidden="true" tabindex="-1"></a><span class="co"># set second margin to zero</span></span>
<span id="cb336-2"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb336-2" aria-hidden="true" tabindex="-1"></a><span class="fu">circos.par</span>(<span class="at">track.margin =</span> <span class="fu">c</span>(<span class="fl">0.01</span>, <span class="dv">0</span>))</span>
<span id="cb336-3"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb336-3" aria-hidden="true" tabindex="-1"></a><span class="fu">chordDiagram</span>(<span class="at">x =</span> d, <span class="at">order =</span> r<span class="sc">$</span>reg, <span class="at">grid.col =</span> r<span class="sc">$</span>col2, <span class="at">transparency =</span> <span class="fl">0.25</span>,</span>
<span id="cb336-4"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb336-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">directional =</span> <span class="dv">1</span>, <span class="at">direction.type =</span> <span class="fu">c</span>(<span class="st">&quot;diffHeight&quot;</span>, <span class="st">&quot;arrows&quot;</span>),</span>
<span id="cb336-5"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb336-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">link.arr.type =</span> <span class="st">&quot;big.arrow&quot;</span>, <span class="at">diffHeight =</span> <span class="sc">-</span><span class="fl">0.05</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/cd-direction3-1.png" width="672" /></p>
<div class="sourceCode" id="cb337"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb337-1"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb337-1" aria-hidden="true" tabindex="-1"></a><span class="co"># set second margin to -0.01 to get seamless overlap</span></span>
<span id="cb337-2"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb337-2" aria-hidden="true" tabindex="-1"></a><span class="fu">circos.par</span>(<span class="at">track.margin =</span> <span class="fu">c</span>(<span class="fl">0.01</span>, <span class="sc">-</span><span class="fl">0.01</span>))</span>
<span id="cb337-3"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb337-3" aria-hidden="true" tabindex="-1"></a><span class="fu">chordDiagram</span>(<span class="at">x =</span> d, <span class="at">order =</span> r<span class="sc">$</span>reg, <span class="at">grid.col =</span> r<span class="sc">$</span>col2, <span class="at">transparency =</span> <span class="fl">0.25</span>,</span>
<span id="cb337-4"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb337-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">directional =</span> <span class="dv">1</span>, <span class="at">direction.type =</span> <span class="fu">c</span>(<span class="st">&quot;diffHeight&quot;</span>, <span class="st">&quot;arrows&quot;</span>),</span>
<span id="cb337-5"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb337-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">link.arr.type =</span> <span class="st">&quot;big.arrow&quot;</span>, <span class="at">diffHeight =</span> <span class="sc">-</span><span class="fl">0.05</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/cd-direction3-2.png" width="672" /></p>
</div>
<div id="chord-ordering" class="section level3" number="10.7.2">
<h3><span class="header-section-number">10.7.2</span> Chord ordering</h3>
<ul>
<li>Number of options in <code>chordDiagram()</code> to control the chord link order
<ul>
<li><code>link.sort</code> sort the order the links from largest to smaller as the enter and exit the plot, by default <code>FALSE</code></li>
<li><code>link.largest.ontop</code> sort the order of the plotting of the links so that the smallest are given less prominence. By default <code>FALSE</code>, so plots the links in the last sector last and they appear more predominant</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb338"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb338-1"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb338-1" aria-hidden="true" tabindex="-1"></a><span class="co"># sort links on sectors</span></span>
<span id="cb338-2"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb338-2" aria-hidden="true" tabindex="-1"></a><span class="fu">chordDiagram</span>(<span class="at">x =</span> d, <span class="at">order =</span> r<span class="sc">$</span>reg, <span class="at">grid.col =</span> r<span class="sc">$</span>col2, <span class="at">transparency =</span> <span class="fl">0.25</span>,</span>
<span id="cb338-3"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb338-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">directional =</span> <span class="dv">1</span>, <span class="at">direction.type =</span> <span class="fu">c</span>(<span class="st">&quot;diffHeight&quot;</span>, <span class="st">&quot;arrows&quot;</span>),</span>
<span id="cb338-4"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb338-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">link.arr.type =</span> <span class="st">&quot;big.arrow&quot;</span>, <span class="at">diffHeight =</span> <span class="sc">-</span><span class="fl">0.05</span>,</span>
<span id="cb338-5"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb338-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">link.sort =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/cd-order-1.png" width="672" /></p>
<div class="sourceCode" id="cb339"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb339-1"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb339-1" aria-hidden="true" tabindex="-1"></a><span class="co"># sort link plotting order</span></span>
<span id="cb339-2"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb339-2" aria-hidden="true" tabindex="-1"></a><span class="fu">chordDiagram</span>(<span class="at">x =</span> d, <span class="at">order =</span> r<span class="sc">$</span>reg, <span class="at">grid.col =</span> r<span class="sc">$</span>col2, <span class="at">transparency =</span> <span class="fl">0.25</span>,</span>
<span id="cb339-3"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb339-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">directional =</span> <span class="dv">1</span>, <span class="at">direction.type =</span> <span class="fu">c</span>(<span class="st">&quot;diffHeight&quot;</span>, <span class="st">&quot;arrows&quot;</span>),</span>
<span id="cb339-4"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb339-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">link.arr.type =</span> <span class="st">&quot;big.arrow&quot;</span>, <span class="at">diffHeight =</span> <span class="sc">-</span><span class="fl">0.05</span>,</span>
<span id="cb339-5"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb339-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">link.sort =</span> <span class="cn">TRUE</span>, <span class="at">link.largest.ontop =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/cd-order-2.png" width="672" /></p>
</div>
</div>
<div id="labels" class="section level2" number="10.8">
<h2><span class="header-section-number">10.8</span> Labels</h2>
<div id="labels-1" class="section level3" number="10.8.1">
<h3><span class="header-section-number">10.8.1</span> Labels</h3>
<ul>
<li>Multiple options for the orientation of labels, set via
<ul>
<li><code>inside</code>, <code>outside</code>, <code>clockwise</code>, <code>reverse.clockwise</code>, <code>downward</code>, <code>bending.inside</code> and <code>bending.outside</code></li>
<li>Cannot pass to <code>chordDiagram()</code> so we have to first use <code>annotationTrack</code> option to only plot the <code>grid</code> (the chords) and <code>axis</code> (default for <code>annotationTrack = c("name", "grid", "axis")</code>)</li>
</ul></li>
<li>To add the labels we use the <code>panel.fun</code> argument in <code>circos.track()</code>.
<ul>
<li>Works like a for loop, cycling through each sector of the track (the circle)</li>
<li>For each sector we use <code>circos.text()</code> to add labels at a specified <code>x</code> and <code>y</code> location</li>
<li>Can also set the <code>facing</code> orientation of the labels as well as other options such as text size (<code>cex</code>) and colour (<code>col</code>)</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb340"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb340-1"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb340-1" aria-hidden="true" tabindex="-1"></a><span class="co"># drop the name labels</span></span>
<span id="cb340-2"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb340-2" aria-hidden="true" tabindex="-1"></a><span class="fu">chordDiagram</span>(<span class="at">x =</span> d, <span class="at">order =</span> r<span class="sc">$</span>reg, <span class="at">grid.col =</span> r<span class="sc">$</span>col2, <span class="at">transparency =</span> <span class="fl">0.25</span>,</span>
<span id="cb340-3"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb340-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">directional =</span> <span class="dv">1</span>, <span class="at">direction.type =</span> <span class="fu">c</span>(<span class="st">&quot;diffHeight&quot;</span>, <span class="st">&quot;arrows&quot;</span>),</span>
<span id="cb340-4"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb340-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">link.arr.type =</span> <span class="st">&quot;big.arrow&quot;</span>, <span class="at">diffHeight =</span> <span class="sc">-</span><span class="fl">0.05</span>,</span>
<span id="cb340-5"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb340-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">link.sort =</span> <span class="cn">TRUE</span>, <span class="at">link.largest.ontop =</span> <span class="cn">TRUE</span>,</span>
<span id="cb340-6"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb340-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">annotationTrack =</span> <span class="fu">c</span>(<span class="st">&quot;grid&quot;</span>, <span class="st">&quot;axis&quot;</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/cd-label1-1.png" width="672" /></p>
</div>
<div id="labels-2" class="section level3" number="10.8.2">
<h3><span class="header-section-number">10.8.2</span> Labels</h3>
<ul>
<li>No room for labels. We can create this using the <code>preAllocateTracks</code> argument.
<ul>
<li>Requires a list of graphical parameters</li>
<li>Set <code>track.height</code> as a percentage of plot area.</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb341"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb341-1"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb341-1" aria-hidden="true" tabindex="-1"></a><span class="fu">chordDiagram</span>(<span class="at">x =</span> d, <span class="at">order =</span> r<span class="sc">$</span>reg, <span class="at">grid.col =</span> r<span class="sc">$</span>col2, <span class="at">transparency =</span> <span class="fl">0.25</span>,</span>
<span id="cb341-2"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb341-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">directional =</span> <span class="dv">1</span>, <span class="at">direction.type =</span> <span class="fu">c</span>(<span class="st">&quot;diffHeight&quot;</span>, <span class="st">&quot;arrows&quot;</span>),</span>
<span id="cb341-3"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb341-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">link.arr.type =</span> <span class="st">&quot;big.arrow&quot;</span>, <span class="at">diffHeight =</span> <span class="sc">-</span><span class="fl">0.05</span>,</span>
<span id="cb341-4"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb341-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">link.sort =</span> <span class="cn">TRUE</span>, <span class="at">link.largest.ontop =</span> <span class="cn">TRUE</span>,</span>
<span id="cb341-5"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb341-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">annotationTrack =</span> <span class="fu">c</span>(<span class="st">&quot;grid&quot;</span>, <span class="st">&quot;axis&quot;</span>),</span>
<span id="cb341-6"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb341-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">preAllocateTracks =</span> <span class="fu">list</span>(<span class="at">track.height =</span> <span class="fl">0.1</span>))</span>
<span id="cb341-7"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb341-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb341-8"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb341-8" aria-hidden="true" tabindex="-1"></a><span class="co"># add labels</span></span>
<span id="cb341-9"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb341-9" aria-hidden="true" tabindex="-1"></a><span class="fu">circos.track</span>(<span class="at">track.index =</span> <span class="dv">1</span>, <span class="at">bg.border =</span> <span class="cn">NA</span>, <span class="at">panel.fun =</span> <span class="cf">function</span>(x, y) {</span>
<span id="cb341-10"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb341-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># create temporary objects for the sector name and x-limits</span></span>
<span id="cb341-11"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb341-11" aria-hidden="true" tabindex="-1"></a>  reg_lab <span class="ot">&lt;-</span> <span class="fu">get.cell.meta.data</span>(<span class="st">&quot;sector.index&quot;</span>)</span>
<span id="cb341-12"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb341-12" aria-hidden="true" tabindex="-1"></a>  xx <span class="ot">&lt;-</span> <span class="fu">get.cell.meta.data</span>(<span class="st">&quot;xlim&quot;</span>)</span>
<span id="cb341-13"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb341-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># use the temporary objects to add text in each sector of the track</span></span>
<span id="cb341-14"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb341-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">circos.text</span>(<span class="at">x =</span> <span class="fu">mean</span>(xx), <span class="at">y =</span> <span class="dv">1</span>, <span class="at">labels =</span> reg_lab, <span class="at">facing =</span> <span class="st">&quot;bending&quot;</span>)</span>
<span id="cb341-15"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb341-15" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div>
<p><img src="_main_files/figure-html/cd-label2-1.png" width="672" /></p>
</div>
<div id="labels-3" class="section level3" number="10.8.3">
<h3><span class="header-section-number">10.8.3</span> Labels</h3>
<ul>
<li>Still not enough room for longer labels.
<ul>
<li>Increase the <code>track.height</code></li>
<li>Create two labels for some regions</li>
<li>Reduce the font size using <code>cex</code> in <code>circos.text()</code> - default is <code>cex = 1</code></li>
</ul></li>
</ul>
<div class="sourceCode" id="cb342"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb342-1"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb342-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_wrap</span>(<span class="at">string =</span> r<span class="sc">$</span>reg, <span class="at">width =</span> <span class="dv">14</span>)</span></code></pre></div>
<pre><code>## [1] &quot;NORTHERN\nAMERICA&quot;                 &quot;AFRICA&quot;                           
## [3] &quot;EUROPE&quot;                            &quot;ASIA&quot;                             
## [5] &quot;OCEANIA&quot;                           &quot;LATIN AMERICA\nAND THE\nCARIBBEAN&quot;</code></pre>
<div class="sourceCode" id="cb344"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb344-1"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb344-1" aria-hidden="true" tabindex="-1"></a>r <span class="ot">&lt;-</span> r <span class="sc">%&gt;%</span></span>
<span id="cb344-2"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb344-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># title case for labels</span></span>
<span id="cb344-3"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb344-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">lab =</span> <span class="fu">str_to_title</span>(<span class="at">string =</span> reg),</span>
<span id="cb344-4"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb344-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">lab =</span> <span class="fu">str_replace</span>(<span class="at">string =</span> lab, <span class="at">pattern =</span> <span class="st">&quot;And The&quot;</span>, <span class="at">replacement =</span> <span class="st">&quot;&amp;&quot;</span>),</span>
<span id="cb344-5"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb344-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># use str_wrap to split longer labels into two</span></span>
<span id="cb344-6"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb344-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">lab =</span> <span class="fu">str_wrap</span>(<span class="at">string =</span> lab, <span class="at">width =</span> <span class="dv">14</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb344-7"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb344-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># separate based on \n</span></span>
<span id="cb344-8"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb344-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(<span class="at">col =</span> lab, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;lab1&quot;</span>, <span class="st">&quot;lab2&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;right&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb344-9"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb344-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># positioning for first lab1, needs to be further out if lab2 exists</span></span>
<span id="cb344-10"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb344-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">y =</span> <span class="fu">ifelse</span>(<span class="at">test =</span> <span class="sc">!</span><span class="fu">is.na</span>(lab2), <span class="at">yes =</span> <span class="dv">1</span>, <span class="at">no =</span> <span class="fl">0.8</span>))</span></code></pre></div>
</div>
<div id="labels-4" class="section level3" number="10.8.4">
<h3><span class="header-section-number">10.8.4</span> Labels</h3>
<ul>
<li>Still not enough room for longer labels.
<ul>
<li>Increase the <code>track.height</code></li>
<li>Create two labels for some regions</li>
<li>Reduce the font size using <code>cex</code> in <code>circos.text()</code> - default is <code>cex = 1</code></li>
</ul></li>
</ul>
<div class="sourceCode" id="cb345"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb345-1"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb345-1" aria-hidden="true" tabindex="-1"></a>r</span></code></pre></div>
<pre><code>## # A tibble: 6 x 8
##   reg                             reg_order col1   col2  col3  lab1  lab2      y
##   &lt;chr&gt;                               &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt;
## 1 NORTHERN AMERICA                        1 black  #E41~ Red   Nort~ Amer~   1  
## 2 AFRICA                                  2 gold   #377~ Grey  Afri~ &lt;NA&gt;    0.8
## 3 EUROPE                                  3 orange #4DA~ Grey  Euro~ &lt;NA&gt;    0.8
## 4 ASIA                                    4 blue   #984~ Grey  Asia  &lt;NA&gt;    0.8
## 5 OCEANIA                                 5 purple #FF7~ Grey  Ocea~ &lt;NA&gt;    0.8
## 6 LATIN AMERICA AND THE CARIBBEAN         6 red    #FFF~ Grey  Lati~ &amp; Ca~   1</code></pre>
</div>
<div id="labels-5" class="section level3" number="10.8.5">
<h3><span class="header-section-number">10.8.5</span> Labels</h3>
<div class="sourceCode" id="cb347"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb347-1"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb347-1" aria-hidden="true" tabindex="-1"></a><span class="fu">chordDiagram</span>(<span class="at">x =</span> d, <span class="at">order =</span> r<span class="sc">$</span>reg, <span class="at">grid.col =</span> r<span class="sc">$</span>col2, <span class="at">transparency =</span> <span class="fl">0.25</span>,</span>
<span id="cb347-2"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb347-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">directional =</span> <span class="dv">1</span>, <span class="at">direction.type =</span> <span class="fu">c</span>(<span class="st">&quot;diffHeight&quot;</span>, <span class="st">&quot;arrows&quot;</span>),</span>
<span id="cb347-3"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb347-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">link.arr.type =</span> <span class="st">&quot;big.arrow&quot;</span>, <span class="at">diffHeight =</span> <span class="sc">-</span><span class="fl">0.05</span>,</span>
<span id="cb347-4"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb347-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">link.sort =</span> <span class="cn">TRUE</span>, <span class="at">link.largest.ontop =</span> <span class="cn">TRUE</span>,</span>
<span id="cb347-5"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb347-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">annotationTrack =</span> <span class="fu">c</span>(<span class="st">&quot;grid&quot;</span>, <span class="st">&quot;axis&quot;</span>),</span>
<span id="cb347-6"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb347-6" aria-hidden="true" tabindex="-1"></a>             <span class="co"># increase to 0.2 to fit two lines of labels</span></span>
<span id="cb347-7"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb347-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">preAllocateTracks =</span> <span class="fu">list</span>(<span class="at">track.height =</span> <span class="fl">0.2</span>))</span>
<span id="cb347-8"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb347-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb347-9"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb347-9" aria-hidden="true" tabindex="-1"></a><span class="fu">circos.track</span>(<span class="at">track.index =</span> <span class="dv">1</span>, <span class="at">bg.border =</span> <span class="cn">NA</span>, <span class="at">panel.fun =</span> <span class="cf">function</span>(x, y) {</span>
<span id="cb347-10"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb347-10" aria-hidden="true" tabindex="-1"></a>  s <span class="ot">&lt;-</span> <span class="fu">get.cell.meta.data</span>(<span class="st">&quot;sector.index&quot;</span>)</span>
<span id="cb347-11"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb347-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># filter to row of r for the sector&#39;s region to create a temporary rr</span></span>
<span id="cb347-12"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb347-12" aria-hidden="true" tabindex="-1"></a>  rr <span class="ot">&lt;-</span> <span class="fu">filter</span>(r, reg <span class="sc">==</span> s)</span>
<span id="cb347-13"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb347-13" aria-hidden="true" tabindex="-1"></a>  xx <span class="ot">&lt;-</span> <span class="fu">get.cell.meta.data</span>(<span class="st">&quot;xlim&quot;</span>)</span>
<span id="cb347-14"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb347-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># use temporary rr to add text</span></span>
<span id="cb347-15"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb347-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">circos.text</span>(<span class="at">x =</span> <span class="fu">mean</span>(xx), <span class="at">y =</span> rr<span class="sc">$</span>y, <span class="at">labels =</span> rr<span class="sc">$</span>lab1, <span class="at">facing =</span> <span class="st">&quot;bending&quot;</span>,</span>
<span id="cb347-16"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb347-16" aria-hidden="true" tabindex="-1"></a>              <span class="at">cex =</span> <span class="fl">0.8</span>)</span>
<span id="cb347-17"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb347-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">circos.text</span>(<span class="at">x =</span> <span class="fu">mean</span>(xx), <span class="at">y =</span> <span class="fl">0.6</span>,  <span class="at">labels =</span> rr<span class="sc">$</span>lab2, <span class="at">facing =</span> <span class="st">&quot;bending&quot;</span>,</span>
<span id="cb347-18"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb347-18" aria-hidden="true" tabindex="-1"></a>              <span class="at">cex =</span> <span class="fl">0.8</span>)</span>
<span id="cb347-19"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb347-19" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div>
<p><img src="_main_files/figure-html/cd-label4-1.png" width="672" /></p>
</div>
<div id="saving" class="section level3" number="10.8.6">
<h3><span class="header-section-number">10.8.6</span> Saving</h3>
<ul>
<li>Always save as PDF to give scalable image
<ul>
<li>We can zoom in very closely and we will still see the chords</li>
<li>If we save a vector graphic, e.g.PNG these details will disappear.</li>
</ul></li>
<li>Use the <code>pdf()</code> function before the plot to open a PDF</li>
<li>Use <code>dev.off()</code> after the plot code to close the PDF</li>
</ul>
<div class="sourceCode" id="cb348"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb348-1"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb348-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pdf</span>(<span class="at">file =</span> <span class="st">&quot;./plot/un_stock_2019.pdf&quot;</span>, <span class="at">width =</span> <span class="dv">4</span>, <span class="at">height =</span> <span class="dv">4</span>)</span>
<span id="cb348-2"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb348-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-3"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb348-3" aria-hidden="true" tabindex="-1"></a><span class="fu">circos.par</span>(<span class="at">track.margin =</span> <span class="fu">c</span>(<span class="fl">0.01</span>, <span class="sc">-</span><span class="fl">0.01</span>), <span class="at">gap.degree =</span> <span class="dv">5</span>, <span class="at">start.degree =</span> <span class="dv">90</span>)</span>
<span id="cb348-4"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb348-4" aria-hidden="true" tabindex="-1"></a><span class="fu">chordDiagram</span>(<span class="at">x =</span> d, <span class="at">order =</span> r<span class="sc">$</span>reg, <span class="at">grid.col =</span> r<span class="sc">$</span>col2, <span class="at">transparency =</span> <span class="fl">0.25</span>,</span>
<span id="cb348-5"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb348-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">directional =</span> <span class="dv">1</span>, <span class="at">direction.type =</span> <span class="fu">c</span>(<span class="st">&quot;diffHeight&quot;</span>, <span class="st">&quot;arrows&quot;</span>),</span>
<span id="cb348-6"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb348-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">link.arr.type =</span> <span class="st">&quot;big.arrow&quot;</span>, <span class="at">diffHeight =</span> <span class="sc">-</span><span class="fl">0.05</span>,</span>
<span id="cb348-7"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb348-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">link.sort =</span> <span class="cn">TRUE</span>, <span class="at">link.largest.ontop =</span> <span class="cn">TRUE</span>,</span>
<span id="cb348-8"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb348-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">annotationTrack =</span> <span class="fu">c</span>(<span class="st">&quot;grid&quot;</span>, <span class="st">&quot;axis&quot;</span>),</span>
<span id="cb348-9"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb348-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">preAllocateTracks =</span> <span class="fu">list</span>(<span class="at">track.height =</span> <span class="fl">0.2</span>))</span>
<span id="cb348-10"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb348-10" aria-hidden="true" tabindex="-1"></a><span class="fu">circos.track</span>(<span class="at">track.index =</span> <span class="dv">1</span>, <span class="at">bg.border =</span> <span class="cn">NA</span>, <span class="at">panel.fun =</span> <span class="cf">function</span>(x, y) {</span>
<span id="cb348-11"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb348-11" aria-hidden="true" tabindex="-1"></a>  s <span class="ot">&lt;-</span> <span class="fu">get.cell.meta.data</span>(<span class="st">&quot;sector.index&quot;</span>)</span>
<span id="cb348-12"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb348-12" aria-hidden="true" tabindex="-1"></a>  rr <span class="ot">&lt;-</span> <span class="fu">filter</span>(r, reg <span class="sc">==</span> s)</span>
<span id="cb348-13"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb348-13" aria-hidden="true" tabindex="-1"></a>  xx <span class="ot">&lt;-</span> <span class="fu">get.cell.meta.data</span>(<span class="st">&quot;xlim&quot;</span>)</span>
<span id="cb348-14"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb348-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">circos.text</span>(<span class="at">x =</span> <span class="fu">mean</span>(xx), <span class="at">y =</span> rr<span class="sc">$</span>y, <span class="at">labels =</span> rr<span class="sc">$</span>lab1, <span class="at">facing =</span> <span class="st">&quot;bending&quot;</span>, <span class="at">cex =</span> <span class="fl">0.8</span>)</span>
<span id="cb348-15"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb348-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">circos.text</span>(<span class="at">x =</span> <span class="fu">mean</span>(xx), <span class="at">y =</span> <span class="fl">0.6</span>,  <span class="at">labels =</span> rr<span class="sc">$</span>lab2, <span class="at">facing =</span> <span class="st">&quot;bending&quot;</span>, <span class="at">cex =</span> <span class="fl">0.8</span>)</span>
<span id="cb348-16"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb348-16" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb348-17"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb348-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-18"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb348-18" aria-hidden="true" tabindex="-1"></a><span class="fu">dev.off</span>()</span></code></pre></div>
</div>
<div id="saving-1" class="section level3" number="10.8.7">
<h3><span class="header-section-number">10.8.7</span> Saving</h3>
<ul>
<li>Left: PNG with <code>width = 4, height = 4</code></li>
<li>Right: PDF with <code>width = 4, height = 4</code></li>
</ul>
<p><img src="plot/un_stock_2019.png" width="45%" /><embed src="plot/un_stock_2019.pdf" width="45%" type="application/pdf" /></p>
<ul>
<li>Could increase resolution of PNG with larger dimensions but at the cost of very large file sizes</li>
</ul>
</div>
<div id="exercise-ex8.r" class="section level3" number="10.8.8">
<h3><span class="header-section-number">10.8.8</span> Exercise (ex8.R)</h3>
<div class="sourceCode" id="cb349"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb349-1"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 0.  a) Load the KOSTAT2021.Rproj file. </span></span>
<span id="cb349-2"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-2" aria-hidden="true" tabindex="-1"></a><span class="co">#     Run the getwd() below. It should print the directory where the </span></span>
<span id="cb349-3"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-3" aria-hidden="true" tabindex="-1"></a><span class="co">#     KOSTAT2021.Rproj file is located.</span></span>
<span id="cb349-4"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-4" aria-hidden="true" tabindex="-1"></a><span class="fu">getwd</span>()</span>
<span id="cb349-5"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-5" aria-hidden="true" tabindex="-1"></a><span class="co">#     b) Load the packages used in this exercise</span></span>
<span id="cb349-6"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb349-7"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(migest)</span>
<span id="cb349-8"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(circlize)</span>
<span id="cb349-9"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-9" aria-hidden="true" tabindex="-1"></a><span class="do">##</span></span>
<span id="cb349-10"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-10" aria-hidden="true" tabindex="-1"></a><span class="do">##</span></span>
<span id="cb349-11"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-11" aria-hidden="true" tabindex="-1"></a><span class="do">##</span></span>
<span id="cb349-12"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-12" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Run the code below to read in the label data in korea_cd_labels.csv taken</span></span>
<span id="cb349-13"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-13" aria-hidden="true" tabindex="-1"></a><span class="co">#    from https://www.tandfonline.com/doi/full/10.1080/21681376.2018.1431149 </span></span>
<span id="cb349-14"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-14" aria-hidden="true" tabindex="-1"></a>r <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;./data/korea_cd_labels.csv&quot;</span>) </span>
<span id="cb349-15"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-15" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(r)</span>
<span id="cb349-16"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-16" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Run the code below to select the 2020 Korean internal migration data, </span></span>
<span id="cb349-17"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-17" aria-hidden="true" tabindex="-1"></a><span class="co">#    for plotting, excluding within region movements</span></span>
<span id="cb349-18"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-18" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> korea_reg <span class="sc">%&gt;%</span></span>
<span id="cb349-19"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2020</span>, </span>
<span id="cb349-20"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-20" aria-hidden="true" tabindex="-1"></a>         orig <span class="sc">!=</span> dest)</span>
<span id="cb349-21"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-21" aria-hidden="true" tabindex="-1"></a>d</span>
<span id="cb349-22"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-22" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Run the code below to check that all the regions in the object r are in the </span></span>
<span id="cb349-23"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-23" aria-hidden="true" tabindex="-1"></a><span class="co">#    migration data frame d</span></span>
<span id="cb349-24"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-24" aria-hidden="true" tabindex="-1"></a><span class="fu">setdiff</span>(<span class="at">x =</span> <span class="fu">union</span>(d<span class="sc">$</span>orig, d<span class="sc">$</span>dest), <span class="at">y =</span> r<span class="sc">$</span>region)</span>
<span id="cb349-25"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-25" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Modify d to enable a more sensible plot</span></span>
<span id="cb349-26"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-26" aria-hidden="true" tabindex="-1"></a><span class="co">#    1) divide flow column by a thousand</span></span>
<span id="cb349-27"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-27" aria-hidden="true" tabindex="-1"></a><span class="co">#    2) adjust the data frame to the three relevant columns for chordDiagram()</span></span>
<span id="cb349-28"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-28" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span></span>
<span id="cb349-29"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="do">#####) %&gt;%</span></span>
<span id="cb349-30"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">flow =</span> flow<span class="sc">/</span><span class="do">#####)</span></span>
<span id="cb349-31"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-31" aria-hidden="true" tabindex="-1"></a><span class="co"># 5. Check the data is in the correct by format by plotting a chord diagram </span></span>
<span id="cb349-32"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-32" aria-hidden="true" tabindex="-1"></a><span class="co">#    using the default settings</span></span>
<span id="cb349-33"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-33" aria-hidden="true" tabindex="-1"></a><span class="fu">chordDiagram</span>(<span class="at">x =</span> <span class="do">#####)</span></span>
<span id="cb349-34"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-34" aria-hidden="true" tabindex="-1"></a><span class="co"># 6. Plot a chord diagram using </span></span>
<span id="cb349-35"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-35" aria-hidden="true" tabindex="-1"></a><span class="co">#    a. the order of provinces from r</span></span>
<span id="cb349-36"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-36" aria-hidden="true" tabindex="-1"></a><span class="co">#    b. colours from the col column in r</span></span>
<span id="cb349-37"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-37" aria-hidden="true" tabindex="-1"></a><span class="co">#    c. transparency set to 0.25</span></span>
<span id="cb349-38"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-38" aria-hidden="true" tabindex="-1"></a><span class="fu">chordDiagram</span>(<span class="at">x =</span> d, <span class="at">order =</span> <span class="do">#####$region, grid.col = r$#####, ##### = 0.25)</span></span>
<span id="cb349-39"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-39" aria-hidden="true" tabindex="-1"></a><span class="co"># 7. Edit the code below to </span></span>
<span id="cb349-40"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-40" aria-hidden="true" tabindex="-1"></a><span class="co">#    a. add directional arrows </span></span>
<span id="cb349-41"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-41" aria-hidden="true" tabindex="-1"></a><span class="co">#    b. change the height at the start and end of the chords to -0.04 </span></span>
<span id="cb349-42"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-42" aria-hidden="true" tabindex="-1"></a><span class="fu">chordDiagram</span>(<span class="at">x =</span> d, <span class="at">order =</span> r<span class="sc">$</span><span class="do">#####, grid.col = r$col, transparency = 0.25,</span></span>
<span id="cb349-43"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-43" aria-hidden="true" tabindex="-1"></a>             <span class="at">directional =</span> <span class="do">#####, direction.type = c(#####, &quot;arrows&quot;),</span></span>
<span id="cb349-44"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-44" aria-hidden="true" tabindex="-1"></a>             <span class="do">##### = &quot;big.arrow&quot;, diffHeight = #####)</span></span>
<span id="cb349-45"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-45" aria-hidden="true" tabindex="-1"></a><span class="co"># 8. Use the circos.par function to set</span></span>
<span id="cb349-46"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-46" aria-hidden="true" tabindex="-1"></a><span class="co">#    a. track margins to c(0.01, -0.01)</span></span>
<span id="cb349-47"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-47" aria-hidden="true" tabindex="-1"></a><span class="co">#    d. start degree to 90</span></span>
<span id="cb349-48"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-48" aria-hidden="true" tabindex="-1"></a><span class="co">#    c. gap degree to a the gap column in object r</span></span>
<span id="cb349-49"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-49" aria-hidden="true" tabindex="-1"></a><span class="co">#    d. plot a chord diagram with these setting based based on the code in the </span></span>
<span id="cb349-50"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-50" aria-hidden="true" tabindex="-1"></a><span class="co">#       answer above</span></span>
<span id="cb349-51"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-51" aria-hidden="true" tabindex="-1"></a><span class="fu">circos.par</span>(<span class="at">track.margin =</span> <span class="fu">c</span>(<span class="do">#####, -0.01), ##### = 90, gap.degree = r$#####)</span></span>
<span id="cb349-52"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-52" aria-hidden="true" tabindex="-1"></a><span class="fu">chordDiagram</span>(<span class="at">x =</span> d, <span class="at">order =</span> r<span class="sc">$</span>region, <span class="at">grid.col =</span> r<span class="sc">$</span>col, <span class="at">transparency =</span> <span class="fl">0.25</span>,</span>
<span id="cb349-53"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-53" aria-hidden="true" tabindex="-1"></a>             <span class="at">directional =</span> <span class="dv">1</span>, <span class="at">direction.type =</span> <span class="fu">c</span>(<span class="st">&quot;diffHeight&quot;</span>, <span class="st">&quot;arrows&quot;</span>),</span>
<span id="cb349-54"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-54" aria-hidden="true" tabindex="-1"></a>             <span class="at">link.arr.type =</span> <span class="st">&quot;big.arrow&quot;</span>, <span class="at">diffHeight =</span> <span class="sc">-</span><span class="fl">0.04</span>)</span>
<span id="cb349-55"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-55" aria-hidden="true" tabindex="-1"></a><span class="co"># 9. Edit below to sort the chord links </span></span>
<span id="cb349-56"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-56" aria-hidden="true" tabindex="-1"></a><span class="co">#    a. into and out of each section</span></span>
<span id="cb349-57"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-57" aria-hidden="true" tabindex="-1"></a><span class="co">#    b. largest links on top</span></span>
<span id="cb349-58"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-58" aria-hidden="true" tabindex="-1"></a><span class="fu">chordDiagram</span>(<span class="at">x =</span> d, <span class="at">order =</span> r<span class="sc">$</span>region, <span class="at">grid.col =</span> r<span class="sc">$</span>col, <span class="at">transparency =</span> <span class="fl">0.25</span>,</span>
<span id="cb349-59"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-59" aria-hidden="true" tabindex="-1"></a>             <span class="at">directional =</span> <span class="dv">1</span>, <span class="at">direction.type =</span> <span class="fu">c</span>(<span class="st">&quot;diffHeight&quot;</span>, <span class="st">&quot;arrows&quot;</span>),</span>
<span id="cb349-60"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-60" aria-hidden="true" tabindex="-1"></a>             <span class="at">link.arr.type =</span> <span class="st">&quot;big.arrow&quot;</span>, <span class="at">diffHeight =</span> <span class="sc">-</span><span class="fl">0.04</span>, </span>
<span id="cb349-61"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-61" aria-hidden="true" tabindex="-1"></a>             <span class="at">link.sort =</span> <span class="do">#####, link.largest.ontop = #####)</span></span>
<span id="cb349-62"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-62" aria-hidden="true" tabindex="-1"></a><span class="co"># 10. Edit the code below to</span></span>
<span id="cb349-63"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-63" aria-hidden="true" tabindex="-1"></a><span class="co">#     a. plot only the grid and the axis</span></span>
<span id="cb349-64"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-64" aria-hidden="true" tabindex="-1"></a><span class="co">#     b. set the track height of the label area to 0.1</span></span>
<span id="cb349-65"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-65" aria-hidden="true" tabindex="-1"></a><span class="fu">chordDiagram</span>(<span class="at">x =</span> d, <span class="at">order =</span> r<span class="sc">$</span>region, <span class="at">grid.col =</span> r<span class="sc">$</span>col, <span class="at">transparency =</span> <span class="fl">0.25</span>,</span>
<span id="cb349-66"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-66" aria-hidden="true" tabindex="-1"></a>             <span class="at">directional =</span> <span class="dv">1</span>, <span class="at">direction.type =</span> <span class="fu">c</span>(<span class="st">&quot;diffHeight&quot;</span>, <span class="st">&quot;arrows&quot;</span>),</span>
<span id="cb349-67"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-67" aria-hidden="true" tabindex="-1"></a>             <span class="at">link.arr.type =</span> <span class="st">&quot;big.arrow&quot;</span>, <span class="at">diffHeight =</span> <span class="sc">-</span><span class="fl">0.04</span>, </span>
<span id="cb349-68"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-68" aria-hidden="true" tabindex="-1"></a>             <span class="at">link.sort =</span> <span class="cn">TRUE</span>, <span class="at">link.largest.ontop =</span> <span class="cn">TRUE</span>, </span>
<span id="cb349-69"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-69" aria-hidden="true" tabindex="-1"></a>             <span class="do">##### = c(&quot;grid&quot;, #####),</span></span>
<span id="cb349-70"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-70" aria-hidden="true" tabindex="-1"></a>             <span class="at">preAllocateTracks =</span> <span class="fu">list</span>(<span class="at">track.height =</span> <span class="do">#####))</span></span>
<span id="cb349-71"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-71" aria-hidden="true" tabindex="-1"></a><span class="co"># 11. Add the labels in the track by</span></span>
<span id="cb349-72"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-72" aria-hidden="true" tabindex="-1"></a><span class="co">#     a. setting y position of label to 1</span></span>
<span id="cb349-73"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-73" aria-hidden="true" tabindex="-1"></a><span class="co">#     b. setting text facing to bending</span></span>
<span id="cb349-74"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-74" aria-hidden="true" tabindex="-1"></a><span class="co">#     c. setting the font size to 0.7</span></span>
<span id="cb349-75"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-75" aria-hidden="true" tabindex="-1"></a><span class="fu">circos.track</span>(<span class="at">track.index =</span> <span class="dv">1</span>, <span class="at">bg.border =</span> <span class="cn">NA</span>, <span class="at">panel.fun =</span> <span class="cf">function</span>(x, y) {</span>
<span id="cb349-76"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-76" aria-hidden="true" tabindex="-1"></a>  s <span class="ot">=</span> <span class="fu">get.cell.meta.data</span>(<span class="st">&quot;sector.index&quot;</span>)</span>
<span id="cb349-77"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-77" aria-hidden="true" tabindex="-1"></a>  xx <span class="ot">=</span> <span class="fu">get.cell.meta.data</span>(<span class="st">&quot;xlim&quot;</span>)</span>
<span id="cb349-78"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-78" aria-hidden="true" tabindex="-1"></a>  rr <span class="ot">=</span> <span class="fu">filter</span>(<span class="do">#####, region == s)</span></span>
<span id="cb349-79"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-79" aria-hidden="true" tabindex="-1"></a>  <span class="fu">circos.text</span>(<span class="at">x =</span> <span class="fu">mean</span>(xx), <span class="at">y =</span> <span class="do">#####, labels = rr$label_en, </span></span>
<span id="cb349-80"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-80" aria-hidden="true" tabindex="-1"></a>              <span class="at">facing =</span> <span class="do">#####, ##### = 0.7)</span></span>
<span id="cb349-81"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-81" aria-hidden="true" tabindex="-1"></a><span class="er">}</span>)</span>
<span id="cb349-82"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-82" aria-hidden="true" tabindex="-1"></a><span class="co"># 12. Use the code in question 10 and 11 to create the PDF version of the plot </span></span>
<span id="cb349-83"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-83" aria-hidden="true" tabindex="-1"></a><span class="fu">pdf</span>(<span class="at">file =</span> <span class="st">&quot;./exercise/korea2020_en.pdf&quot;</span>, <span class="at">width =</span> <span class="dv">5</span>, <span class="at">height =</span> <span class="dv">5</span>)</span>
<span id="cb349-84"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb349-85"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb349-86"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb349-87"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb349-88"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb349-89"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-89" aria-hidden="true" tabindex="-1"></a><span class="do">##### paste in here ...</span></span>
<span id="cb349-90"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb349-91"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb349-92"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb349-93"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb349-94"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb349-95"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb349-96"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb349-97"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-97" aria-hidden="true" tabindex="-1"></a><span class="fu">dev.off</span>()</span>
<span id="cb349-98"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-98" aria-hidden="true" tabindex="-1"></a><span class="co"># 13. Run the code below to check the PDF (might not work on Mac - if so, </span></span>
<span id="cb349-99"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-99" aria-hidden="true" tabindex="-1"></a><span class="co">#     manually open PDF file to view)</span></span>
<span id="cb349-100"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-100" aria-hidden="true" tabindex="-1"></a><span class="fu">file.show</span>(<span class="st">&quot;./exercise/korea2020_en.pdf&quot;</span>)</span>
<span id="cb349-101"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-101" aria-hidden="true" tabindex="-1"></a><span class="co"># 14. Complete the code below to add a second set of Korean labels.</span></span>
<span id="cb349-102"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-102" aria-hidden="true" tabindex="-1"></a><span class="co">#     Note: East Asian characters require a non-standard font families - see </span></span>
<span id="cb349-103"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-103" aria-hidden="true" tabindex="-1"></a><span class="co">#           ?pdfFonts for options. Might not require to set family depending on</span></span>
<span id="cb349-104"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-104" aria-hidden="true" tabindex="-1"></a><span class="co">#           settings in your computer and/or RStudio</span></span>
<span id="cb349-105"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-105" aria-hidden="true" tabindex="-1"></a><span class="fu">pdf</span>(<span class="at">file =</span> <span class="st">&quot;./exercise/korea2020.pdf&quot;</span>, <span class="at">width =</span> <span class="dv">5</span>, <span class="at">height =</span> <span class="dv">5</span>, <span class="at">family =</span> <span class="st">&quot;Korea1&quot;</span>)</span>
<span id="cb349-106"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-106" aria-hidden="true" tabindex="-1"></a><span class="fu">chordDiagram</span>(<span class="at">x =</span> d, <span class="at">order =</span> r<span class="sc">$</span>region, <span class="at">grid.col =</span> r<span class="sc">$</span>col, <span class="at">transparency =</span> <span class="fl">0.25</span>,</span>
<span id="cb349-107"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-107" aria-hidden="true" tabindex="-1"></a>             <span class="at">directional =</span> <span class="dv">1</span>, <span class="at">direction.type =</span> <span class="fu">c</span>(<span class="st">&quot;diffHeight&quot;</span>, <span class="st">&quot;arrows&quot;</span>),</span>
<span id="cb349-108"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-108" aria-hidden="true" tabindex="-1"></a>             <span class="at">link.arr.type =</span> <span class="st">&quot;big.arrow&quot;</span>, <span class="at">diffHeight =</span> <span class="sc">-</span><span class="fl">0.04</span>, </span>
<span id="cb349-109"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-109" aria-hidden="true" tabindex="-1"></a>             <span class="at">link.sort =</span> <span class="cn">TRUE</span>, <span class="at">link.largest.ontop =</span> <span class="cn">TRUE</span>, </span>
<span id="cb349-110"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-110" aria-hidden="true" tabindex="-1"></a>             <span class="at">annotationTrack =</span> <span class="fu">c</span>(<span class="st">&quot;grid&quot;</span>, <span class="st">&quot;axis&quot;</span>),</span>
<span id="cb349-111"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-111" aria-hidden="true" tabindex="-1"></a>             <span class="at">preAllocateTracks =</span> <span class="fu">list</span>(<span class="at">track.height =</span> <span class="fl">0.1</span>))</span>
<span id="cb349-112"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-112" aria-hidden="true" tabindex="-1"></a><span class="fu">circos.track</span>(<span class="at">track.index =</span> <span class="dv">1</span>, <span class="at">bg.border =</span> <span class="cn">NA</span>, <span class="at">panel.fun =</span> <span class="cf">function</span>(x, y) {</span>
<span id="cb349-113"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-113" aria-hidden="true" tabindex="-1"></a>  s <span class="ot">=</span> <span class="fu">get.cell.meta.data</span>(<span class="st">&quot;sector.index&quot;</span>)</span>
<span id="cb349-114"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-114" aria-hidden="true" tabindex="-1"></a>  <span class="do">##### &lt;- filter(r, region == s)</span></span>
<span id="cb349-115"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-115" aria-hidden="true" tabindex="-1"></a>  xx <span class="ot">=</span> <span class="fu">get.cell.meta.data</span>(<span class="st">&quot;xlim&quot;</span>)</span>
<span id="cb349-116"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-116" aria-hidden="true" tabindex="-1"></a>  <span class="fu">circos.text</span>(<span class="at">x =</span> <span class="fu">mean</span>(xx), <span class="at">y =</span> <span class="fl">1.5</span>, <span class="at">labels =</span> rr<span class="sc">$</span>label_en, </span>
<span id="cb349-117"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-117" aria-hidden="true" tabindex="-1"></a>              <span class="at">facing =</span> <span class="st">&quot;bending&quot;</span>, <span class="at">cex =</span> <span class="fl">0.7</span>)</span>
<span id="cb349-118"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-118" aria-hidden="true" tabindex="-1"></a>  <span class="fu">circos.text</span>(<span class="at">x =</span> <span class="fu">mean</span>(xx), <span class="at">y =</span> <span class="fl">0.9</span>, <span class="at">labels =</span> rr<span class="sc">$</span><span class="do">#####, </span></span>
<span id="cb349-119"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-119" aria-hidden="true" tabindex="-1"></a>              <span class="at">facing =</span> <span class="st">&quot;bending&quot;</span>, <span class="at">cex =</span> <span class="fl">0.7</span>)</span>
<span id="cb349-120"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-120" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb349-121"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-121" aria-hidden="true" tabindex="-1"></a><span class="fu">dev.off</span>()</span>
<span id="cb349-122"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-122" aria-hidden="true" tabindex="-1"></a><span class="fu">file.show</span>(<span class="st">&quot;./exercise/korea2020.pdf&quot;</span>)</span>
<span id="cb349-123"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-123" aria-hidden="true" tabindex="-1"></a><span class="co"># 15. Run the code below to check the PDF (might not work on Mac - if so, </span></span>
<span id="cb349-124"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-124" aria-hidden="true" tabindex="-1"></a><span class="co">#     manually open PDF file to view)</span></span>
<span id="cb349-125"><a href="chord-diagrams-for-visualising-bilateral-migration.html#cb349-125" aria-hidden="true" tabindex="-1"></a><span class="fu">file.show</span>(<span class="st">&quot;./exercise/korea2020.pdf&quot;</span>)</span></code></pre></div>

</div>
</div>
</div>
<h3>References</h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-Abel2014" class="csl-entry">
Abel, Guy J., and Nikola Sander. 2014. <span><span>Quantifying Global International Migration Flows</span>.</span> <em>Science</em> 343 (6178): 152022. <a href="https://doi.org/10.1126/science.1248676">https://doi.org/10.1126/science.1248676</a>.
</div>
<div id="ref-Gu2014" class="csl-entry">
Gu, Z., Lei Gu, Roland Eils, Matthias Schlesner, and Benedikt Brors. 2014. <span><span class="nocase">circlize implements and enhances circular visualization in R</span>.</span> <em>Bioinformatics</em> 30 (19): 281112. <a href="https://doi.org/10.1093/bioinformatics/btu393">https://doi.org/10.1093/bioinformatics/btu393</a>.
</div>
<div id="ref-Krzywinski2009" class="csl-entry">
Krzywinski, Martin, Jacqueline Schein, Inan Birol, Joseph Connors, Randy Gascoyne, Doug Horsman, Steven J. Jones, and Marco A. Marra. 2009. <span><span class="nocase">Circos: An information aesthetic for comparative genomics</span>.</span> <em>Genome Research</em> 19 (9): 163945. <a href="https://doi.org/10.1101/gr.092759.109">https://doi.org/10.1101/gr.092759.109</a>.
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="estimating-bilateral-migration.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="sankey-plots-for-visualising-bilateral-migration.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/08-visual1.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
